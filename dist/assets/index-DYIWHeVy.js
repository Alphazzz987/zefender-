(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var su={exports:{}},di={},iu={exports:{}},D={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=Symbol.for("react.element"),Jh=Symbol.for("react.portal"),Yh=Symbol.for("react.fragment"),Xh=Symbol.for("react.strict_mode"),Zh=Symbol.for("react.profiler"),ef=Symbol.for("react.provider"),tf=Symbol.for("react.context"),rf=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),sf=Symbol.for("react.memo"),af=Symbol.for("react.lazy"),wo=Symbol.iterator;function lf(e){return e===null||typeof e!="object"?null:(e=wo&&e[wo]||e["@@iterator"],typeof e=="function"?e:null)}var au={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lu=Object.assign,ou={};function Gr(e,t,r){this.props=e,this.context=t,this.refs=ou,this.updater=r||au}Gr.prototype.isReactComponent={};Gr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cu(){}cu.prototype=Gr.prototype;function gl(e,t,r){this.props=e,this.context=t,this.refs=ou,this.updater=r||au}var xl=gl.prototype=new cu;xl.constructor=gl;lu(xl,Gr.prototype);xl.isPureReactComponent=!0;var jo=Array.isArray,uu=Object.prototype.hasOwnProperty,yl={current:null},du={key:!0,ref:!0,__self:!0,__source:!0};function hu(e,t,r){var n,s={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)uu.call(t,n)&&!du.hasOwnProperty(n)&&(s[n]=t[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:Qn,type:e,key:a,ref:l,props:s,_owner:yl.current}}function of(e,t){return{$$typeof:Qn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qn}function cf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var bo=/\/+/g;function Ii(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cf(""+e.key):t.toString(36)}function Ss(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Qn:case Jh:l=!0}}if(l)return l=e,s=s(l),e=n===""?"."+Ii(l,0):n,jo(s)?(r="",e!=null&&(r=e.replace(bo,"$&/")+"/"),Ss(s,t,r,"",function(u){return u})):s!=null&&(vl(s)&&(s=of(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(bo,"$&/")+"/")+e)),t.push(s)),1;if(l=0,n=n===""?".":n+":",jo(e))for(var o=0;o<e.length;o++){a=e[o];var c=n+Ii(a,o);l+=Ss(a,t,r,c,s)}else if(c=lf(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=n+Ii(a,o++),l+=Ss(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ss(e,t,r){if(e==null)return e;var n=[],s=0;return Ss(e,n,"","",function(a){return t.call(r,a,s++)}),n}function uf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ye={current:null},Cs={transition:null},df={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:Cs,ReactCurrentOwner:yl};function fu(){throw Error("act(...) is not supported in production builds of React.")}D.Children={map:ss,forEach:function(e,t,r){ss(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ss(e,function(){t++}),t},toArray:function(e){return ss(e,function(t){return t})||[]},only:function(e){if(!vl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};D.Component=Gr;D.Fragment=Yh;D.Profiler=Zh;D.PureComponent=gl;D.StrictMode=Xh;D.Suspense=nf;D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=df;D.act=fu;D.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=lu({},e.props),s=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=yl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)uu.call(t,c)&&!du.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Qn,type:e.type,key:s,ref:a,props:n,_owner:l}};D.createContext=function(e){return e={$$typeof:tf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ef,_context:e},e.Consumer=e};D.createElement=hu;D.createFactory=function(e){var t=hu.bind(null,e);return t.type=e,t};D.createRef=function(){return{current:null}};D.forwardRef=function(e){return{$$typeof:rf,render:e}};D.isValidElement=vl;D.lazy=function(e){return{$$typeof:af,_payload:{_status:-1,_result:e},_init:uf}};D.memo=function(e,t){return{$$typeof:sf,type:e,compare:t===void 0?null:t}};D.startTransition=function(e){var t=Cs.transition;Cs.transition={};try{e()}finally{Cs.transition=t}};D.unstable_act=fu;D.useCallback=function(e,t){return ye.current.useCallback(e,t)};D.useContext=function(e){return ye.current.useContext(e)};D.useDebugValue=function(){};D.useDeferredValue=function(e){return ye.current.useDeferredValue(e)};D.useEffect=function(e,t){return ye.current.useEffect(e,t)};D.useId=function(){return ye.current.useId()};D.useImperativeHandle=function(e,t,r){return ye.current.useImperativeHandle(e,t,r)};D.useInsertionEffect=function(e,t){return ye.current.useInsertionEffect(e,t)};D.useLayoutEffect=function(e,t){return ye.current.useLayoutEffect(e,t)};D.useMemo=function(e,t){return ye.current.useMemo(e,t)};D.useReducer=function(e,t,r){return ye.current.useReducer(e,t,r)};D.useRef=function(e){return ye.current.useRef(e)};D.useState=function(e){return ye.current.useState(e)};D.useSyncExternalStore=function(e,t,r){return ye.current.useSyncExternalStore(e,t,r)};D.useTransition=function(){return ye.current.useTransition()};D.version="18.3.1";iu.exports=D;var T=iu.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hf=T,ff=Symbol.for("react.element"),mf=Symbol.for("react.fragment"),pf=Object.prototype.hasOwnProperty,gf=hf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xf={key:!0,ref:!0,__self:!0,__source:!0};function mu(e,t,r){var n,s={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)pf.call(t,n)&&!xf.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:ff,type:e,key:a,ref:l,props:s,_owner:gf.current}}di.Fragment=mf;di.jsx=mu;di.jsxs=mu;su.exports=di;var i=su.exports,pu={exports:{}},Te={},gu={exports:{}},xu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,A){var $=C.length;C.push(A);e:for(;0<$;){var S=$-1>>>1,R=C[S];if(0<s(R,A))C[S]=A,C[$]=R,$=S;else break e}}function r(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var A=C[0],$=C.pop();if($!==A){C[0]=$;e:for(var S=0,R=C.length,Le=R>>>1;S<Le;){var ie=2*(S+1)-1,tn=C[ie],Ht=ie+1,ns=C[Ht];if(0>s(tn,$))Ht<R&&0>s(ns,tn)?(C[S]=ns,C[Ht]=$,S=Ht):(C[S]=tn,C[ie]=$,S=ie);else if(Ht<R&&0>s(ns,$))C[S]=ns,C[Ht]=$,S=Ht;else break e}}return A}function s(C,A){var $=C.sortIndex-A.sortIndex;return $!==0?$:C.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,h=null,m=3,x=!1,v=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(C){for(var A=r(u);A!==null;){if(A.callback===null)n(u);else if(A.startTime<=C)n(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=r(u)}}function j(C){if(w=!1,p(C),!v)if(r(c)!==null)v=!0,mr(_);else{var A=r(u);A!==null&&Fe(j,A.startTime-C)}}function _(C,A){v=!1,w&&(w=!1,g(E),E=-1),x=!0;var $=m;try{for(p(A),h=r(c);h!==null&&(!(h.expirationTime>A)||C&&!ce());){var S=h.callback;if(typeof S=="function"){h.callback=null,m=h.priorityLevel;var R=S(h.expirationTime<=A);A=e.unstable_now(),typeof R=="function"?h.callback=R:h===r(c)&&n(c),p(A)}else n(c);h=r(c)}if(h!==null)var Le=!0;else{var ie=r(u);ie!==null&&Fe(j,ie.startTime-A),Le=!1}return Le}finally{h=null,m=$,x=!1}}var y=!1,N=null,E=-1,M=5,L=-1;function ce(){return!(e.unstable_now()-L<M)}function gt(){if(N!==null){var C=e.unstable_now();L=C;var A=!0;try{A=N(!0,C)}finally{A?Kt():(y=!1,N=null)}}else y=!1}var Kt;if(typeof f=="function")Kt=function(){f(gt)};else if(typeof MessageChannel<"u"){var en=new MessageChannel,rs=en.port2;en.port1.onmessage=gt,Kt=function(){rs.postMessage(null)}}else Kt=function(){b(gt,0)};function mr(C){N=C,y||(y=!0,Kt())}function Fe(C,A){E=b(function(){C(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,mr(_))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(C){switch(m){case 1:case 2:case 3:var A=3;break;default:A=m}var $=m;m=A;try{return C()}finally{m=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,A){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var $=m;m=C;try{return A()}finally{m=$}},e.unstable_scheduleCallback=function(C,A,$){var S=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?S+$:S):$=S,C){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=$+R,C={id:d++,callback:A,priorityLevel:C,startTime:$,expirationTime:R,sortIndex:-1},$>S?(C.sortIndex=$,t(u,C),r(c)===null&&C===r(u)&&(w?(g(E),E=-1):w=!0,Fe(j,$-S))):(C.sortIndex=R,t(c,C),v||x||(v=!0,mr(_))),C},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(C){var A=m;return function(){var $=m;m=A;try{return C.apply(this,arguments)}finally{m=$}}}})(xu);gu.exports=xu;var yf=gu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=T,Re=yf;function k(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yu=new Set,Pn={};function dr(e,t){zr(e,t),zr(e+"Capture",t)}function zr(e,t){for(Pn[e]=t,e=0;e<t.length;e++)yu.add(t[e])}var ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=Object.prototype.hasOwnProperty,wf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_o={},No={};function jf(e){return pa.call(No,e)?!0:pa.call(_o,e)?!1:wf.test(e)?No[e]=!0:(_o[e]=!0,!1)}function bf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _f(e,t,r,n){if(t===null||typeof t>"u"||bf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ve(e,t,r,n,s,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){oe[e]=new ve(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];oe[t]=new ve(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){oe[e]=new ve(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){oe[e]=new ve(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){oe[e]=new ve(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){oe[e]=new ve(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){oe[e]=new ve(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){oe[e]=new ve(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){oe[e]=new ve(e,5,!1,e.toLowerCase(),null,!1,!1)});var wl=/[\-:]([a-z])/g;function jl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wl,jl);oe[t]=new ve(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wl,jl);oe[t]=new ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wl,jl);oe[t]=new ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){oe[e]=new ve(e,1,!1,e.toLowerCase(),null,!1,!1)});oe.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){oe[e]=new ve(e,1,!1,e.toLowerCase(),null,!0,!0)});function bl(e,t,r,n){var s=oe.hasOwnProperty(t)?oe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_f(t,r,s,n)&&(r=null),n||s===null?jf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var pt=vf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,is=Symbol.for("react.element"),jr=Symbol.for("react.portal"),br=Symbol.for("react.fragment"),_l=Symbol.for("react.strict_mode"),ga=Symbol.for("react.profiler"),vu=Symbol.for("react.provider"),wu=Symbol.for("react.context"),Nl=Symbol.for("react.forward_ref"),xa=Symbol.for("react.suspense"),ya=Symbol.for("react.suspense_list"),kl=Symbol.for("react.memo"),vt=Symbol.for("react.lazy"),ju=Symbol.for("react.offscreen"),ko=Symbol.iterator;function rn(e){return e===null||typeof e!="object"?null:(e=ko&&e[ko]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,Di;function hn(e){if(Di===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Di=t&&t[1]||""}return`
`+Di+e}var Mi=!1;function Ui(e,t){if(!e||Mi)return"";Mi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),l=s.length-1,o=a.length-1;1<=l&&0<=o&&s[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(s[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||s[l]!==a[o]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Mi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?hn(e):""}function Nf(e){switch(e.tag){case 5:return hn(e.type);case 16:return hn("Lazy");case 13:return hn("Suspense");case 19:return hn("SuspenseList");case 0:case 2:case 15:return e=Ui(e.type,!1),e;case 11:return e=Ui(e.type.render,!1),e;case 1:return e=Ui(e.type,!0),e;default:return""}}function va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case br:return"Fragment";case jr:return"Portal";case ga:return"Profiler";case _l:return"StrictMode";case xa:return"Suspense";case ya:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wu:return(e.displayName||"Context")+".Consumer";case vu:return(e._context.displayName||"Context")+".Provider";case Nl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kl:return t=e.displayName||null,t!==null?t:va(e.type)||"Memo";case vt:t=e._payload,e=e._init;try{return va(e(t))}catch{}}return null}function kf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return va(t);case 8:return t===_l?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sf(e){var t=bu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function as(e){e._valueTracker||(e._valueTracker=Sf(e))}function _u(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=bu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wa(e,t){var r=t.checked;return G({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function So(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Dt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nu(e,t){t=t.checked,t!=null&&bl(e,"checked",t,!1)}function ja(e,t){Nu(e,t);var r=Dt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ba(e,t.type,r):t.hasOwnProperty("defaultValue")&&ba(e,t.type,Dt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Co(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ba(e,t,r){(t!=="number"||Ms(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var fn=Array.isArray;function Lr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Dt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function _a(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(k(91));return G({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eo(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(k(92));if(fn(r)){if(1<r.length)throw Error(k(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Dt(r)}}function ku(e,t){var r=Dt(t.value),n=Dt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Po(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Su(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Na(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Su(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ls,Cu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ls=ls||document.createElement("div"),ls.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ls.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Cf=["Webkit","ms","Moz","O"];Object.keys(xn).forEach(function(e){Cf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xn[t]=xn[e]})});function Eu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||xn.hasOwnProperty(e)&&xn[e]?(""+t).trim():t+"px"}function Pu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Eu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Ef=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ka(e,t){if(t){if(Ef[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(k(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(k(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(k(61))}if(t.style!=null&&typeof t.style!="object")throw Error(k(62))}}function Sa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=null;function Sl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ea=null,Or=null,$r=null;function Ro(e){if(e=Yn(e)){if(typeof Ea!="function")throw Error(k(280));var t=e.stateNode;t&&(t=gi(t),Ea(e.stateNode,e.type,t))}}function Ru(e){Or?$r?$r.push(e):$r=[e]:Or=e}function Tu(){if(Or){var e=Or,t=$r;if($r=Or=null,Ro(e),t)for(e=0;e<t.length;e++)Ro(t[e])}}function Au(e,t){return e(t)}function Lu(){}var zi=!1;function Ou(e,t,r){if(zi)return e(t,r);zi=!0;try{return Au(e,t,r)}finally{zi=!1,(Or!==null||$r!==null)&&(Lu(),Tu())}}function Tn(e,t){var r=e.stateNode;if(r===null)return null;var n=gi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(k(231,t,typeof r));return r}var Pa=!1;if(ut)try{var nn={};Object.defineProperty(nn,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",nn,nn),window.removeEventListener("test",nn,nn)}catch{Pa=!1}function Pf(e,t,r,n,s,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var yn=!1,Us=null,zs=!1,Ra=null,Rf={onError:function(e){yn=!0,Us=e}};function Tf(e,t,r,n,s,a,l,o,c){yn=!1,Us=null,Pf.apply(Rf,arguments)}function Af(e,t,r,n,s,a,l,o,c){if(Tf.apply(this,arguments),yn){if(yn){var u=Us;yn=!1,Us=null}else throw Error(k(198));zs||(zs=!0,Ra=u)}}function hr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function To(e){if(hr(e)!==e)throw Error(k(188))}function Lf(e){var t=e.alternate;if(!t){if(t=hr(e),t===null)throw Error(k(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return To(s),e;if(a===n)return To(s),t;a=a.sibling}throw Error(k(188))}if(r.return!==n.return)r=s,n=a;else{for(var l=!1,o=s.child;o;){if(o===r){l=!0,r=s,n=a;break}if(o===n){l=!0,n=s,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,n=s;break}if(o===n){l=!0,n=a,r=s;break}o=o.sibling}if(!l)throw Error(k(189))}}if(r.alternate!==n)throw Error(k(190))}if(r.tag!==3)throw Error(k(188));return r.stateNode.current===r?e:t}function Iu(e){return e=Lf(e),e!==null?Du(e):null}function Du(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Du(e);if(t!==null)return t;e=e.sibling}return null}var Mu=Re.unstable_scheduleCallback,Ao=Re.unstable_cancelCallback,Of=Re.unstable_shouldYield,$f=Re.unstable_requestPaint,Y=Re.unstable_now,If=Re.unstable_getCurrentPriorityLevel,Cl=Re.unstable_ImmediatePriority,Uu=Re.unstable_UserBlockingPriority,Fs=Re.unstable_NormalPriority,Df=Re.unstable_LowPriority,zu=Re.unstable_IdlePriority,hi=null,et=null;function Mf(e){if(et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(hi,e,void 0,(e.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:Ff,Uf=Math.log,zf=Math.LN2;function Ff(e){return e>>>=0,e===0?32:31-(Uf(e)/zf|0)|0}var os=64,cs=4194304;function mn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qs(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var o=l&~s;o!==0?n=mn(o):(a&=l,a!==0&&(n=mn(a)))}else l=r&~s,l!==0?n=mn(l):a!==0&&(n=mn(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Qe(t),s=1<<r,n|=e[r],t&=~s;return n}function qf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bf(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Qe(a),o=1<<l,c=s[l];c===-1?(!(o&r)||o&n)&&(s[l]=qf(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Ta(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fu(){var e=os;return os<<=1,!(os&4194240)&&(os=64),e}function Fi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Gn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qe(t),e[t]=r}function Kf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Qe(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function El(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Qe(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var F=0;function qu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bu,Pl,Ku,Hu,Wu,Aa=!1,us=[],Et=null,Pt=null,Rt=null,An=new Map,Ln=new Map,bt=[],Hf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lo(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":An.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ln.delete(t.pointerId)}}function sn(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Yn(t),t!==null&&Pl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Wf(e,t,r,n,s){switch(t){case"focusin":return Et=sn(Et,e,t,r,n,s),!0;case"dragenter":return Pt=sn(Pt,e,t,r,n,s),!0;case"mouseover":return Rt=sn(Rt,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return An.set(a,sn(An.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Ln.set(a,sn(Ln.get(a)||null,e,t,r,n,s)),!0}return!1}function Vu(e){var t=Xt(e.target);if(t!==null){var r=hr(t);if(r!==null){if(t=r.tag,t===13){if(t=$u(r),t!==null){e.blockedOn=t,Wu(e.priority,function(){Ku(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Es(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=La(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ca=n,r.target.dispatchEvent(n),Ca=null}else return t=Yn(r),t!==null&&Pl(t),e.blockedOn=r,!1;t.shift()}return!0}function Oo(e,t,r){Es(e)&&r.delete(t)}function Vf(){Aa=!1,Et!==null&&Es(Et)&&(Et=null),Pt!==null&&Es(Pt)&&(Pt=null),Rt!==null&&Es(Rt)&&(Rt=null),An.forEach(Oo),Ln.forEach(Oo)}function an(e,t){e.blockedOn===t&&(e.blockedOn=null,Aa||(Aa=!0,Re.unstable_scheduleCallback(Re.unstable_NormalPriority,Vf)))}function On(e){function t(s){return an(s,e)}if(0<us.length){an(us[0],e);for(var r=1;r<us.length;r++){var n=us[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Et!==null&&an(Et,e),Pt!==null&&an(Pt,e),Rt!==null&&an(Rt,e),An.forEach(t),Ln.forEach(t),r=0;r<bt.length;r++)n=bt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<bt.length&&(r=bt[0],r.blockedOn===null);)Vu(r),r.blockedOn===null&&bt.shift()}var Ir=pt.ReactCurrentBatchConfig,Bs=!0;function Qf(e,t,r,n){var s=F,a=Ir.transition;Ir.transition=null;try{F=1,Rl(e,t,r,n)}finally{F=s,Ir.transition=a}}function Gf(e,t,r,n){var s=F,a=Ir.transition;Ir.transition=null;try{F=4,Rl(e,t,r,n)}finally{F=s,Ir.transition=a}}function Rl(e,t,r,n){if(Bs){var s=La(e,t,r,n);if(s===null)Yi(e,t,n,Ks,r),Lo(e,n);else if(Wf(s,e,t,r,n))n.stopPropagation();else if(Lo(e,n),t&4&&-1<Hf.indexOf(e)){for(;s!==null;){var a=Yn(s);if(a!==null&&Bu(a),a=La(e,t,r,n),a===null&&Yi(e,t,n,Ks,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Yi(e,t,n,null,r)}}var Ks=null;function La(e,t,r,n){if(Ks=null,e=Sl(n),e=Xt(e),e!==null)if(t=hr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=$u(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ks=e,null}function Qu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(If()){case Cl:return 1;case Uu:return 4;case Fs:case Df:return 16;case zu:return 536870912;default:return 16}default:return 16}}var St=null,Tl=null,Ps=null;function Gu(){if(Ps)return Ps;var e,t=Tl,r=t.length,n,s="value"in St?St.value:St.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===s[a-n];n++);return Ps=s.slice(e,1<n?1-n:void 0)}function Rs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ds(){return!0}function $o(){return!1}function Ae(e){function t(r,n,s,a,l){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ds:$o,this.isPropagationStopped=$o,this}return G(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),t}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=Ae(Jr),Jn=G({},Jr,{view:0,detail:0}),Jf=Ae(Jn),qi,Bi,ln,fi=G({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ll,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&e.type==="mousemove"?(qi=e.screenX-ln.screenX,Bi=e.screenY-ln.screenY):Bi=qi=0,ln=e),qi)},movementY:function(e){return"movementY"in e?e.movementY:Bi}}),Io=Ae(fi),Yf=G({},fi,{dataTransfer:0}),Xf=Ae(Yf),Zf=G({},Jn,{relatedTarget:0}),Ki=Ae(Zf),em=G({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),tm=Ae(em),rm=G({},Jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nm=Ae(rm),sm=G({},Jr,{data:0}),Do=Ae(sm),im={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function om(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lm[e])?!!t[e]:!1}function Ll(){return om}var cm=G({},Jn,{key:function(e){if(e.key){var t=im[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?am[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ll,charCode:function(e){return e.type==="keypress"?Rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),um=Ae(cm),dm=G({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mo=Ae(dm),hm=G({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ll}),fm=Ae(hm),mm=G({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),pm=Ae(mm),gm=G({},fi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xm=Ae(gm),ym=[9,13,27,32],Ol=ut&&"CompositionEvent"in window,vn=null;ut&&"documentMode"in document&&(vn=document.documentMode);var vm=ut&&"TextEvent"in window&&!vn,Ju=ut&&(!Ol||vn&&8<vn&&11>=vn),Uo=" ",zo=!1;function Yu(e,t){switch(e){case"keyup":return ym.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function wm(e,t){switch(e){case"compositionend":return Xu(t);case"keypress":return t.which!==32?null:(zo=!0,Uo);case"textInput":return e=t.data,e===Uo&&zo?null:e;default:return null}}function jm(e,t){if(_r)return e==="compositionend"||!Ol&&Yu(e,t)?(e=Gu(),Ps=Tl=St=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ju&&t.locale!=="ko"?null:t.data;default:return null}}var bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bm[e.type]:t==="textarea"}function Zu(e,t,r,n){Ru(n),t=Hs(t,"onChange"),0<t.length&&(r=new Al("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var wn=null,$n=null;function _m(e){ud(e,0)}function mi(e){var t=Sr(e);if(_u(t))return e}function Nm(e,t){if(e==="change")return t}var ed=!1;if(ut){var Hi;if(ut){var Wi="oninput"in document;if(!Wi){var qo=document.createElement("div");qo.setAttribute("oninput","return;"),Wi=typeof qo.oninput=="function"}Hi=Wi}else Hi=!1;ed=Hi&&(!document.documentMode||9<document.documentMode)}function Bo(){wn&&(wn.detachEvent("onpropertychange",td),$n=wn=null)}function td(e){if(e.propertyName==="value"&&mi($n)){var t=[];Zu(t,$n,e,Sl(e)),Ou(_m,t)}}function km(e,t,r){e==="focusin"?(Bo(),wn=t,$n=r,wn.attachEvent("onpropertychange",td)):e==="focusout"&&Bo()}function Sm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mi($n)}function Cm(e,t){if(e==="click")return mi(t)}function Em(e,t){if(e==="input"||e==="change")return mi(t)}function Pm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Je=typeof Object.is=="function"?Object.is:Pm;function In(e,t){if(Je(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!pa.call(t,s)||!Je(e[s],t[s]))return!1}return!0}function Ko(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ho(e,t){var r=Ko(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ko(r)}}function rd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nd(){for(var e=window,t=Ms();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ms(e.document)}return t}function $l(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rm(e){var t=nd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&rd(r.ownerDocument.documentElement,r)){if(n!==null&&$l(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=Ho(r,a);var l=Ho(r,n);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Tm=ut&&"documentMode"in document&&11>=document.documentMode,Nr=null,Oa=null,jn=null,$a=!1;function Wo(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$a||Nr==null||Nr!==Ms(n)||(n=Nr,"selectionStart"in n&&$l(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),jn&&In(jn,n)||(jn=n,n=Hs(Oa,"onSelect"),0<n.length&&(t=new Al("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Nr)))}function hs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var kr={animationend:hs("Animation","AnimationEnd"),animationiteration:hs("Animation","AnimationIteration"),animationstart:hs("Animation","AnimationStart"),transitionend:hs("Transition","TransitionEnd")},Vi={},sd={};ut&&(sd=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function pi(e){if(Vi[e])return Vi[e];if(!kr[e])return e;var t=kr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in sd)return Vi[e]=t[r];return e}var id=pi("animationend"),ad=pi("animationiteration"),ld=pi("animationstart"),od=pi("transitionend"),cd=new Map,Vo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zt(e,t){cd.set(e,t),dr(t,[e])}for(var Qi=0;Qi<Vo.length;Qi++){var Gi=Vo[Qi],Am=Gi.toLowerCase(),Lm=Gi[0].toUpperCase()+Gi.slice(1);zt(Am,"on"+Lm)}zt(id,"onAnimationEnd");zt(ad,"onAnimationIteration");zt(ld,"onAnimationStart");zt("dblclick","onDoubleClick");zt("focusin","onFocus");zt("focusout","onBlur");zt(od,"onTransitionEnd");zr("onMouseEnter",["mouseout","mouseover"]);zr("onMouseLeave",["mouseout","mouseover"]);zr("onPointerEnter",["pointerout","pointerover"]);zr("onPointerLeave",["pointerout","pointerover"]);dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Om=new Set("cancel close invalid load scroll toggle".split(" ").concat(pn));function Qo(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Af(n,t,void 0,e),e.currentTarget=null}function ud(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&s.isPropagationStopped())break e;Qo(s,o,u),a=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&s.isPropagationStopped())break e;Qo(s,o,u),a=c}}}if(zs)throw e=Ra,zs=!1,Ra=null,e}function K(e,t){var r=t[za];r===void 0&&(r=t[za]=new Set);var n=e+"__bubble";r.has(n)||(dd(t,e,2,!1),r.add(n))}function Ji(e,t,r){var n=0;t&&(n|=4),dd(r,e,n,t)}var fs="_reactListening"+Math.random().toString(36).slice(2);function Dn(e){if(!e[fs]){e[fs]=!0,yu.forEach(function(r){r!=="selectionchange"&&(Om.has(r)||Ji(r,!1,e),Ji(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fs]||(t[fs]=!0,Ji("selectionchange",!1,t))}}function dd(e,t,r,n){switch(Qu(t)){case 1:var s=Qf;break;case 4:s=Gf;break;default:s=Rl}r=s.bind(null,t,r,e),s=void 0,!Pa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Yi(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;o!==null;){if(l=Xt(o),l===null)return;if(c=l.tag,c===5||c===6){n=a=l;continue e}o=o.parentNode}}n=n.return}Ou(function(){var u=a,d=Sl(r),h=[];e:{var m=cd.get(e);if(m!==void 0){var x=Al,v=e;switch(e){case"keypress":if(Rs(r)===0)break e;case"keydown":case"keyup":x=um;break;case"focusin":v="focus",x=Ki;break;case"focusout":v="blur",x=Ki;break;case"beforeblur":case"afterblur":x=Ki;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Io;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Xf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=fm;break;case id:case ad:case ld:x=tm;break;case od:x=pm;break;case"scroll":x=Jf;break;case"wheel":x=xm;break;case"copy":case"cut":case"paste":x=nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Mo}var w=(t&4)!==0,b=!w&&e==="scroll",g=w?m!==null?m+"Capture":null:m;w=[];for(var f=u,p;f!==null;){p=f;var j=p.stateNode;if(p.tag===5&&j!==null&&(p=j,g!==null&&(j=Tn(f,g),j!=null&&w.push(Mn(f,j,p)))),b)break;f=f.return}0<w.length&&(m=new x(m,v,null,r,d),h.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&r!==Ca&&(v=r.relatedTarget||r.fromElement)&&(Xt(v)||v[dt]))break e;if((x||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,x?(v=r.relatedTarget||r.toElement,x=u,v=v?Xt(v):null,v!==null&&(b=hr(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=u),x!==v)){if(w=Io,j="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(w=Mo,j="onPointerLeave",g="onPointerEnter",f="pointer"),b=x==null?m:Sr(x),p=v==null?m:Sr(v),m=new w(j,f+"leave",x,r,d),m.target=b,m.relatedTarget=p,j=null,Xt(d)===u&&(w=new w(g,f+"enter",v,r,d),w.target=p,w.relatedTarget=b,j=w),b=j,x&&v)t:{for(w=x,g=v,f=0,p=w;p;p=pr(p))f++;for(p=0,j=g;j;j=pr(j))p++;for(;0<f-p;)w=pr(w),f--;for(;0<p-f;)g=pr(g),p--;for(;f--;){if(w===g||g!==null&&w===g.alternate)break t;w=pr(w),g=pr(g)}w=null}else w=null;x!==null&&Go(h,m,x,w,!1),v!==null&&b!==null&&Go(h,b,v,w,!0)}}e:{if(m=u?Sr(u):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var _=Nm;else if(Fo(m))if(ed)_=Em;else{_=Sm;var y=km}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(_=Cm);if(_&&(_=_(e,u))){Zu(h,_,r,d);break e}y&&y(e,m,u),e==="focusout"&&(y=m._wrapperState)&&y.controlled&&m.type==="number"&&ba(m,"number",m.value)}switch(y=u?Sr(u):window,e){case"focusin":(Fo(y)||y.contentEditable==="true")&&(Nr=y,Oa=u,jn=null);break;case"focusout":jn=Oa=Nr=null;break;case"mousedown":$a=!0;break;case"contextmenu":case"mouseup":case"dragend":$a=!1,Wo(h,r,d);break;case"selectionchange":if(Tm)break;case"keydown":case"keyup":Wo(h,r,d)}var N;if(Ol)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else _r?Yu(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Ju&&r.locale!=="ko"&&(_r||E!=="onCompositionStart"?E==="onCompositionEnd"&&_r&&(N=Gu()):(St=d,Tl="value"in St?St.value:St.textContent,_r=!0)),y=Hs(u,E),0<y.length&&(E=new Do(E,e,null,r,d),h.push({event:E,listeners:y}),N?E.data=N:(N=Xu(r),N!==null&&(E.data=N)))),(N=vm?wm(e,r):jm(e,r))&&(u=Hs(u,"onBeforeInput"),0<u.length&&(d=new Do("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}ud(h,t)})}function Mn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hs(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Tn(e,r),a!=null&&n.unshift(Mn(e,a,s)),a=Tn(e,t),a!=null&&n.push(Mn(e,a,s))),e=e.return}return n}function pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Go(e,t,r,n,s){for(var a=t._reactName,l=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,s?(c=Tn(r,a),c!=null&&l.unshift(Mn(r,c,o))):s||(c=Tn(r,a),c!=null&&l.push(Mn(r,c,o)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var $m=/\r\n?/g,Im=/\u0000|\uFFFD/g;function Jo(e){return(typeof e=="string"?e:""+e).replace($m,`
`).replace(Im,"")}function ms(e,t,r){if(t=Jo(t),Jo(e)!==t&&r)throw Error(k(425))}function Ws(){}var Ia=null,Da=null;function Ma(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ua=typeof setTimeout=="function"?setTimeout:void 0,Dm=typeof clearTimeout=="function"?clearTimeout:void 0,Yo=typeof Promise=="function"?Promise:void 0,Mm=typeof queueMicrotask=="function"?queueMicrotask:typeof Yo<"u"?function(e){return Yo.resolve(null).then(e).catch(Um)}:Ua;function Um(e){setTimeout(function(){throw e})}function Xi(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),On(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);On(t)}function Tt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xo(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),Ze="__reactFiber$"+Yr,Un="__reactProps$"+Yr,dt="__reactContainer$"+Yr,za="__reactEvents$"+Yr,zm="__reactListeners$"+Yr,Fm="__reactHandles$"+Yr;function Xt(e){var t=e[Ze];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dt]||r[Ze]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xo(e);e!==null;){if(r=e[Ze])return r;e=Xo(e)}return t}e=r,r=e.parentNode}return null}function Yn(e){return e=e[Ze]||e[dt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(k(33))}function gi(e){return e[Un]||null}var Fa=[],Cr=-1;function Ft(e){return{current:e}}function H(e){0>Cr||(e.current=Fa[Cr],Fa[Cr]=null,Cr--)}function B(e,t){Cr++,Fa[Cr]=e.current,e.current=t}var Mt={},me=Ft(Mt),Ne=Ft(!1),nr=Mt;function Fr(e,t){var r=e.type.contextTypes;if(!r)return Mt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ke(e){return e=e.childContextTypes,e!=null}function Vs(){H(Ne),H(me)}function Zo(e,t,r){if(me.current!==Mt)throw Error(k(168));B(me,t),B(Ne,r)}function hd(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(k(108,kf(e)||"Unknown",s));return G({},r,n)}function Qs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mt,nr=me.current,B(me,e),B(Ne,Ne.current),!0}function ec(e,t,r){var n=e.stateNode;if(!n)throw Error(k(169));r?(e=hd(e,t,nr),n.__reactInternalMemoizedMergedChildContext=e,H(Ne),H(me),B(me,e)):H(Ne),B(Ne,r)}var it=null,xi=!1,Zi=!1;function fd(e){it===null?it=[e]:it.push(e)}function qm(e){xi=!0,fd(e)}function qt(){if(!Zi&&it!==null){Zi=!0;var e=0,t=F;try{var r=it;for(F=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}it=null,xi=!1}catch(s){throw it!==null&&(it=it.slice(e+1)),Mu(Cl,qt),s}finally{F=t,Zi=!1}}return null}var Er=[],Pr=0,Gs=null,Js=0,Oe=[],$e=0,sr=null,at=1,lt="";function Vt(e,t){Er[Pr++]=Js,Er[Pr++]=Gs,Gs=e,Js=t}function md(e,t,r){Oe[$e++]=at,Oe[$e++]=lt,Oe[$e++]=sr,sr=e;var n=at;e=lt;var s=32-Qe(n)-1;n&=~(1<<s),r+=1;var a=32-Qe(t)+s;if(30<a){var l=s-s%5;a=(n&(1<<l)-1).toString(32),n>>=l,s-=l,at=1<<32-Qe(t)+s|r<<s|n,lt=a+e}else at=1<<a|r<<s|n,lt=e}function Il(e){e.return!==null&&(Vt(e,1),md(e,1,0))}function Dl(e){for(;e===Gs;)Gs=Er[--Pr],Er[Pr]=null,Js=Er[--Pr],Er[Pr]=null;for(;e===sr;)sr=Oe[--$e],Oe[$e]=null,lt=Oe[--$e],Oe[$e]=null,at=Oe[--$e],Oe[$e]=null}var Pe=null,Ee=null,W=!1,Ve=null;function pd(e,t){var r=Ie(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function tc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pe=e,Ee=Tt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pe=e,Ee=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sr!==null?{id:at,overflow:lt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ie(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Pe=e,Ee=null,!0):!1;default:return!1}}function qa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ba(e){if(W){var t=Ee;if(t){var r=t;if(!tc(e,t)){if(qa(e))throw Error(k(418));t=Tt(r.nextSibling);var n=Pe;t&&tc(e,t)?pd(n,r):(e.flags=e.flags&-4097|2,W=!1,Pe=e)}}else{if(qa(e))throw Error(k(418));e.flags=e.flags&-4097|2,W=!1,Pe=e}}}function rc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pe=e}function ps(e){if(e!==Pe)return!1;if(!W)return rc(e),W=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ma(e.type,e.memoizedProps)),t&&(t=Ee)){if(qa(e))throw gd(),Error(k(418));for(;t;)pd(e,t),t=Tt(t.nextSibling)}if(rc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(k(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ee=Tt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ee=null}}else Ee=Pe?Tt(e.stateNode.nextSibling):null;return!0}function gd(){for(var e=Ee;e;)e=Tt(e.nextSibling)}function qr(){Ee=Pe=null,W=!1}function Ml(e){Ve===null?Ve=[e]:Ve.push(e)}var Bm=pt.ReactCurrentBatchConfig;function on(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(k(309));var n=r.stateNode}if(!n)throw Error(k(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var o=s.refs;l===null?delete o[a]:o[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(k(284));if(!r._owner)throw Error(k(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(k(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nc(e){var t=e._init;return t(e._payload)}function xd(e){function t(g,f){if(e){var p=g.deletions;p===null?(g.deletions=[f],g.flags|=16):p.push(f)}}function r(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function n(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=$t(g,f),g.index=0,g.sibling=null,g}function a(g,f,p){return g.index=p,e?(p=g.alternate,p!==null?(p=p.index,p<f?(g.flags|=2,f):p):(g.flags|=2,f)):(g.flags|=1048576,f)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,f,p,j){return f===null||f.tag!==6?(f=aa(p,g.mode,j),f.return=g,f):(f=s(f,p),f.return=g,f)}function c(g,f,p,j){var _=p.type;return _===br?d(g,f,p.props.children,j,p.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===vt&&nc(_)===f.type)?(j=s(f,p.props),j.ref=on(g,f,p),j.return=g,j):(j=Ds(p.type,p.key,p.props,null,g.mode,j),j.ref=on(g,f,p),j.return=g,j)}function u(g,f,p,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=la(p,g.mode,j),f.return=g,f):(f=s(f,p.children||[]),f.return=g,f)}function d(g,f,p,j,_){return f===null||f.tag!==7?(f=rr(p,g.mode,j,_),f.return=g,f):(f=s(f,p),f.return=g,f)}function h(g,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=aa(""+f,g.mode,p),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case is:return p=Ds(f.type,f.key,f.props,null,g.mode,p),p.ref=on(g,null,f),p.return=g,p;case jr:return f=la(f,g.mode,p),f.return=g,f;case vt:var j=f._init;return h(g,j(f._payload),p)}if(fn(f)||rn(f))return f=rr(f,g.mode,p,null),f.return=g,f;gs(g,f)}return null}function m(g,f,p,j){var _=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return _!==null?null:o(g,f,""+p,j);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case is:return p.key===_?c(g,f,p,j):null;case jr:return p.key===_?u(g,f,p,j):null;case vt:return _=p._init,m(g,f,_(p._payload),j)}if(fn(p)||rn(p))return _!==null?null:d(g,f,p,j,null);gs(g,p)}return null}function x(g,f,p,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return g=g.get(p)||null,o(f,g,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case is:return g=g.get(j.key===null?p:j.key)||null,c(f,g,j,_);case jr:return g=g.get(j.key===null?p:j.key)||null,u(f,g,j,_);case vt:var y=j._init;return x(g,f,p,y(j._payload),_)}if(fn(j)||rn(j))return g=g.get(p)||null,d(f,g,j,_,null);gs(f,j)}return null}function v(g,f,p,j){for(var _=null,y=null,N=f,E=f=0,M=null;N!==null&&E<p.length;E++){N.index>E?(M=N,N=null):M=N.sibling;var L=m(g,N,p[E],j);if(L===null){N===null&&(N=M);break}e&&N&&L.alternate===null&&t(g,N),f=a(L,f,E),y===null?_=L:y.sibling=L,y=L,N=M}if(E===p.length)return r(g,N),W&&Vt(g,E),_;if(N===null){for(;E<p.length;E++)N=h(g,p[E],j),N!==null&&(f=a(N,f,E),y===null?_=N:y.sibling=N,y=N);return W&&Vt(g,E),_}for(N=n(g,N);E<p.length;E++)M=x(N,g,E,p[E],j),M!==null&&(e&&M.alternate!==null&&N.delete(M.key===null?E:M.key),f=a(M,f,E),y===null?_=M:y.sibling=M,y=M);return e&&N.forEach(function(ce){return t(g,ce)}),W&&Vt(g,E),_}function w(g,f,p,j){var _=rn(p);if(typeof _!="function")throw Error(k(150));if(p=_.call(p),p==null)throw Error(k(151));for(var y=_=null,N=f,E=f=0,M=null,L=p.next();N!==null&&!L.done;E++,L=p.next()){N.index>E?(M=N,N=null):M=N.sibling;var ce=m(g,N,L.value,j);if(ce===null){N===null&&(N=M);break}e&&N&&ce.alternate===null&&t(g,N),f=a(ce,f,E),y===null?_=ce:y.sibling=ce,y=ce,N=M}if(L.done)return r(g,N),W&&Vt(g,E),_;if(N===null){for(;!L.done;E++,L=p.next())L=h(g,L.value,j),L!==null&&(f=a(L,f,E),y===null?_=L:y.sibling=L,y=L);return W&&Vt(g,E),_}for(N=n(g,N);!L.done;E++,L=p.next())L=x(N,g,E,L.value,j),L!==null&&(e&&L.alternate!==null&&N.delete(L.key===null?E:L.key),f=a(L,f,E),y===null?_=L:y.sibling=L,y=L);return e&&N.forEach(function(gt){return t(g,gt)}),W&&Vt(g,E),_}function b(g,f,p,j){if(typeof p=="object"&&p!==null&&p.type===br&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case is:e:{for(var _=p.key,y=f;y!==null;){if(y.key===_){if(_=p.type,_===br){if(y.tag===7){r(g,y.sibling),f=s(y,p.props.children),f.return=g,g=f;break e}}else if(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===vt&&nc(_)===y.type){r(g,y.sibling),f=s(y,p.props),f.ref=on(g,y,p),f.return=g,g=f;break e}r(g,y);break}else t(g,y);y=y.sibling}p.type===br?(f=rr(p.props.children,g.mode,j,p.key),f.return=g,g=f):(j=Ds(p.type,p.key,p.props,null,g.mode,j),j.ref=on(g,f,p),j.return=g,g=j)}return l(g);case jr:e:{for(y=p.key;f!==null;){if(f.key===y)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){r(g,f.sibling),f=s(f,p.children||[]),f.return=g,g=f;break e}else{r(g,f);break}else t(g,f);f=f.sibling}f=la(p,g.mode,j),f.return=g,g=f}return l(g);case vt:return y=p._init,b(g,f,y(p._payload),j)}if(fn(p))return v(g,f,p,j);if(rn(p))return w(g,f,p,j);gs(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(r(g,f.sibling),f=s(f,p),f.return=g,g=f):(r(g,f),f=aa(p,g.mode,j),f.return=g,g=f),l(g)):r(g,f)}return b}var Br=xd(!0),yd=xd(!1),Ys=Ft(null),Xs=null,Rr=null,Ul=null;function zl(){Ul=Rr=Xs=null}function Fl(e){var t=Ys.current;H(Ys),e._currentValue=t}function Ka(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Dr(e,t){Xs=e,Ul=Rr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_e=!0),e.firstContext=null)}function Ue(e){var t=e._currentValue;if(Ul!==e)if(e={context:e,memoizedValue:t,next:null},Rr===null){if(Xs===null)throw Error(k(308));Rr=e,Xs.dependencies={lanes:0,firstContext:e}}else Rr=Rr.next=e;return t}var Zt=null;function ql(e){Zt===null?Zt=[e]:Zt.push(e)}function vd(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,ql(t)):(r.next=s.next,s.next=r),t.interleaved=r,ht(e,n)}function ht(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wt=!1;function Bl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ot(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function At(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,z&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ht(e,r)}return s=n.interleaved,s===null?(t.next=t,ql(n)):(t.next=s.next,s.next=t),n.interleaved=t,ht(e,r)}function Ts(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,El(e,r)}}function sc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Zs(e,t,r,n){var s=e.updateQueue;wt=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==l&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;l=0,d=u=c=null,o=a;do{var m=o.lane,x=o.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,w=o;switch(m=t,x=r,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(x,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,m=typeof v=="function"?v.call(x,h,m):v,m==null)break e;h=G({},h,m);break e;case 2:wt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[o]:m.push(o))}else x={eventTime:x,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=x,c=h):d=d.next=x,l|=m;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;m=o,o=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);ar|=l,e.lanes=l,e.memoizedState=h}}function ic(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(k(191,s));s.call(n)}}}var Xn={},tt=Ft(Xn),zn=Ft(Xn),Fn=Ft(Xn);function er(e){if(e===Xn)throw Error(k(174));return e}function Kl(e,t){switch(B(Fn,t),B(zn,e),B(tt,Xn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Na(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Na(t,e)}H(tt),B(tt,t)}function Kr(){H(tt),H(zn),H(Fn)}function jd(e){er(Fn.current);var t=er(tt.current),r=Na(t,e.type);t!==r&&(B(zn,e),B(tt,r))}function Hl(e){zn.current===e&&(H(tt),H(zn))}var V=Ft(0);function ei(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ea=[];function Wl(){for(var e=0;e<ea.length;e++)ea[e]._workInProgressVersionPrimary=null;ea.length=0}var As=pt.ReactCurrentDispatcher,ta=pt.ReactCurrentBatchConfig,ir=0,Q=null,Z=null,ne=null,ti=!1,bn=!1,qn=0,Km=0;function ue(){throw Error(k(321))}function Vl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Je(e[r],t[r]))return!1;return!0}function Ql(e,t,r,n,s,a){if(ir=a,Q=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,As.current=e===null||e.memoizedState===null?Qm:Gm,e=r(n,s),bn){a=0;do{if(bn=!1,qn=0,25<=a)throw Error(k(301));a+=1,ne=Z=null,t.updateQueue=null,As.current=Jm,e=r(n,s)}while(bn)}if(As.current=ri,t=Z!==null&&Z.next!==null,ir=0,ne=Z=Q=null,ti=!1,t)throw Error(k(300));return e}function Gl(){var e=qn!==0;return qn=0,e}function Xe(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ne===null?Q.memoizedState=ne=e:ne=ne.next=e,ne}function ze(){if(Z===null){var e=Q.alternate;e=e!==null?e.memoizedState:null}else e=Z.next;var t=ne===null?Q.memoizedState:ne.next;if(t!==null)ne=t,Z=e;else{if(e===null)throw Error(k(310));Z=e,e={memoizedState:Z.memoizedState,baseState:Z.baseState,baseQueue:Z.baseQueue,queue:Z.queue,next:null},ne===null?Q.memoizedState=ne=e:ne=ne.next=e}return ne}function Bn(e,t){return typeof t=="function"?t(e):t}function ra(e){var t=ze(),r=t.queue;if(r===null)throw Error(k(311));r.lastRenderedReducer=e;var n=Z,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var o=l=null,c=null,u=a;do{var d=u.lane;if((ir&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,l=n):c=c.next=h,Q.lanes|=d,ar|=d}u=u.next}while(u!==null&&u!==a);c===null?l=n:c.next=o,Je(n,t.memoizedState)||(_e=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,Q.lanes|=a,ar|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function na(e){var t=ze(),r=t.queue;if(r===null)throw Error(k(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do a=e(a,l.action),l=l.next;while(l!==s);Je(a,t.memoizedState)||(_e=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function bd(){}function _d(e,t){var r=Q,n=ze(),s=t(),a=!Je(n.memoizedState,s);if(a&&(n.memoizedState=s,_e=!0),n=n.queue,Jl(Sd.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ne!==null&&ne.memoizedState.tag&1){if(r.flags|=2048,Kn(9,kd.bind(null,r,n,s,t),void 0,null),se===null)throw Error(k(349));ir&30||Nd(r,t,s)}return s}function Nd(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Q.updateQueue,t===null?(t={lastEffect:null,stores:null},Q.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function kd(e,t,r,n){t.value=r,t.getSnapshot=n,Cd(t)&&Ed(e)}function Sd(e,t,r){return r(function(){Cd(t)&&Ed(e)})}function Cd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Je(e,r)}catch{return!0}}function Ed(e){var t=ht(e,1);t!==null&&Ge(t,e,1,-1)}function ac(e){var t=Xe();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:e},t.queue=e,e=e.dispatch=Vm.bind(null,Q,e),[t.memoizedState,e]}function Kn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Q.updateQueue,t===null?(t={lastEffect:null,stores:null},Q.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Pd(){return ze().memoizedState}function Ls(e,t,r,n){var s=Xe();Q.flags|=e,s.memoizedState=Kn(1|t,r,void 0,n===void 0?null:n)}function yi(e,t,r,n){var s=ze();n=n===void 0?null:n;var a=void 0;if(Z!==null){var l=Z.memoizedState;if(a=l.destroy,n!==null&&Vl(n,l.deps)){s.memoizedState=Kn(t,r,a,n);return}}Q.flags|=e,s.memoizedState=Kn(1|t,r,a,n)}function lc(e,t){return Ls(8390656,8,e,t)}function Jl(e,t){return yi(2048,8,e,t)}function Rd(e,t){return yi(4,2,e,t)}function Td(e,t){return yi(4,4,e,t)}function Ad(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ld(e,t,r){return r=r!=null?r.concat([e]):null,yi(4,4,Ad.bind(null,t,e),r)}function Yl(){}function Od(e,t){var r=ze();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vl(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $d(e,t){var r=ze();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Vl(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Id(e,t,r){return ir&21?(Je(r,t)||(r=Fu(),Q.lanes|=r,ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_e=!0),e.memoizedState=r)}function Hm(e,t){var r=F;F=r!==0&&4>r?r:4,e(!0);var n=ta.transition;ta.transition={};try{e(!1),t()}finally{F=r,ta.transition=n}}function Dd(){return ze().memoizedState}function Wm(e,t,r){var n=Ot(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Md(e))Ud(t,r);else if(r=vd(e,t,r,n),r!==null){var s=xe();Ge(r,e,n,s),zd(r,t,n)}}function Vm(e,t,r){var n=Ot(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Md(e))Ud(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,o=a(l,r);if(s.hasEagerState=!0,s.eagerState=o,Je(o,l)){var c=t.interleaved;c===null?(s.next=s,ql(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=vd(e,t,s,n),r!==null&&(s=xe(),Ge(r,e,n,s),zd(r,t,n))}}function Md(e){var t=e.alternate;return e===Q||t!==null&&t===Q}function Ud(e,t){bn=ti=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function zd(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,El(e,r)}}var ri={readContext:Ue,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useInsertionEffect:ue,useLayoutEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useMutableSource:ue,useSyncExternalStore:ue,useId:ue,unstable_isNewReconciler:!1},Qm={readContext:Ue,useCallback:function(e,t){return Xe().memoizedState=[e,t===void 0?null:t],e},useContext:Ue,useEffect:lc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ls(4194308,4,Ad.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var r=Xe();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Xe();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Wm.bind(null,Q,e),[n.memoizedState,e]},useRef:function(e){var t=Xe();return e={current:e},t.memoizedState=e},useState:ac,useDebugValue:Yl,useDeferredValue:function(e){return Xe().memoizedState=e},useTransition:function(){var e=ac(!1),t=e[0];return e=Hm.bind(null,e[1]),Xe().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Q,s=Xe();if(W){if(r===void 0)throw Error(k(407));r=r()}else{if(r=t(),se===null)throw Error(k(349));ir&30||Nd(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,lc(Sd.bind(null,n,a,e),[e]),n.flags|=2048,Kn(9,kd.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Xe(),t=se.identifierPrefix;if(W){var r=lt,n=at;r=(n&~(1<<32-Qe(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=qn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Km++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Gm={readContext:Ue,useCallback:Od,useContext:Ue,useEffect:Jl,useImperativeHandle:Ld,useInsertionEffect:Rd,useLayoutEffect:Td,useMemo:$d,useReducer:ra,useRef:Pd,useState:function(){return ra(Bn)},useDebugValue:Yl,useDeferredValue:function(e){var t=ze();return Id(t,Z.memoizedState,e)},useTransition:function(){var e=ra(Bn)[0],t=ze().memoizedState;return[e,t]},useMutableSource:bd,useSyncExternalStore:_d,useId:Dd,unstable_isNewReconciler:!1},Jm={readContext:Ue,useCallback:Od,useContext:Ue,useEffect:Jl,useImperativeHandle:Ld,useInsertionEffect:Rd,useLayoutEffect:Td,useMemo:$d,useReducer:na,useRef:Pd,useState:function(){return na(Bn)},useDebugValue:Yl,useDeferredValue:function(e){var t=ze();return Z===null?t.memoizedState=e:Id(t,Z.memoizedState,e)},useTransition:function(){var e=na(Bn)[0],t=ze().memoizedState;return[e,t]},useMutableSource:bd,useSyncExternalStore:_d,useId:Dd,unstable_isNewReconciler:!1};function Ke(e,t){if(e&&e.defaultProps){t=G({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ha(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:G({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vi={isMounted:function(e){return(e=e._reactInternals)?hr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xe(),s=Ot(e),a=ot(n,s);a.payload=t,r!=null&&(a.callback=r),t=At(e,a,s),t!==null&&(Ge(t,e,s,n),Ts(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xe(),s=Ot(e),a=ot(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=At(e,a,s),t!==null&&(Ge(t,e,s,n),Ts(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xe(),n=Ot(e),s=ot(r,n);s.tag=2,t!=null&&(s.callback=t),t=At(e,s,n),t!==null&&(Ge(t,e,n,r),Ts(t,e,n))}};function oc(e,t,r,n,s,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!In(r,n)||!In(s,a):!0}function Fd(e,t,r){var n=!1,s=Mt,a=t.contextType;return typeof a=="object"&&a!==null?a=Ue(a):(s=ke(t)?nr:me.current,n=t.contextTypes,a=(n=n!=null)?Fr(e,s):Mt),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function cc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&vi.enqueueReplaceState(t,t.state,null)}function Wa(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Bl(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Ue(a):(a=ke(t)?nr:me.current,s.context=Fr(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Ha(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&vi.enqueueReplaceState(s,s.state,null),Zs(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Hr(e,t){try{var r="",n=t;do r+=Nf(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function sa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Va(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ym=typeof WeakMap=="function"?WeakMap:Map;function qd(e,t,r){r=ot(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){si||(si=!0,nl=n),Va(e,t)},r}function Bd(e,t,r){r=ot(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Va(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Va(e,t),typeof n!="function"&&(Lt===null?Lt=new Set([this]):Lt.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function uc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Ym;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=dp.bind(null,e,t,r),t.then(e,e))}function dc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ot(-1,1),t.tag=2,At(r,t,1))),r.lanes|=1),e)}var Xm=pt.ReactCurrentOwner,_e=!1;function ge(e,t,r,n){t.child=e===null?yd(t,null,r,n):Br(t,e.child,r,n)}function fc(e,t,r,n,s){r=r.render;var a=t.ref;return Dr(t,s),n=Ql(e,t,r,n,a,s),r=Gl(),e!==null&&!_e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ft(e,t,s)):(W&&r&&Il(t),t.flags|=1,ge(e,t,n,s),t.child)}function mc(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!io(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Kd(e,t,a,n,s)):(e=Ds(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:In,r(l,n)&&e.ref===t.ref)return ft(e,t,s)}return t.flags|=1,e=$t(a,n),e.ref=t.ref,e.return=t,t.child=e}function Kd(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(In(a,n)&&e.ref===t.ref)if(_e=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(_e=!0);else return t.lanes=e.lanes,ft(e,t,s)}return Qa(e,t,r,n,s)}function Hd(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},B(Ar,Ce),Ce|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,B(Ar,Ce),Ce|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,B(Ar,Ce),Ce|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,B(Ar,Ce),Ce|=n;return ge(e,t,s,r),t.child}function Wd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Qa(e,t,r,n,s){var a=ke(r)?nr:me.current;return a=Fr(t,a),Dr(t,s),r=Ql(e,t,r,n,a,s),n=Gl(),e!==null&&!_e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ft(e,t,s)):(W&&n&&Il(t),t.flags|=1,ge(e,t,r,s),t.child)}function pc(e,t,r,n,s){if(ke(r)){var a=!0;Qs(t)}else a=!1;if(Dr(t,s),t.stateNode===null)Os(e,t),Fd(t,r,n),Wa(t,r,n,s),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ue(u):(u=ke(r)?nr:me.current,u=Fr(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==u)&&cc(t,l,n,u),wt=!1;var m=t.memoizedState;l.state=m,Zs(t,n,l,s),c=t.memoizedState,o!==n||m!==c||Ne.current||wt?(typeof d=="function"&&(Ha(t,r,d,n),c=t.memoizedState),(o=wt||oc(t,r,o,n,m,c,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=u,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,wd(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Ke(t.type,o),l.props=u,h=t.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ue(c):(c=ke(r)?nr:me.current,c=Fr(t,c));var x=r.getDerivedStateFromProps;(d=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==h||m!==c)&&cc(t,l,n,c),wt=!1,m=t.memoizedState,l.state=m,Zs(t,n,l,s);var v=t.memoizedState;o!==h||m!==v||Ne.current||wt?(typeof x=="function"&&(Ha(t,r,x,n),v=t.memoizedState),(u=wt||oc(t,r,u,n,m,v,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,v,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),l.props=n,l.state=v,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Ga(e,t,r,n,a,s)}function Ga(e,t,r,n,s,a){Wd(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return s&&ec(t,r,!1),ft(e,t,a);n=t.stateNode,Xm.current=t;var o=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=Br(t,e.child,null,a),t.child=Br(t,null,o,a)):ge(e,t,o,a),t.memoizedState=n.state,s&&ec(t,r,!0),t.child}function Vd(e){var t=e.stateNode;t.pendingContext?Zo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zo(e,t.context,!1),Kl(e,t.containerInfo)}function gc(e,t,r,n,s){return qr(),Ml(s),t.flags|=256,ge(e,t,r,n),t.child}var Ja={dehydrated:null,treeContext:null,retryLane:0};function Ya(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qd(e,t,r){var n=t.pendingProps,s=V.current,a=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),B(V,s&1),e===null)return Ba(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,a?(n=t.mode,a=t.child,l={mode:"hidden",children:l},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=bi(l,n,0,null),e=rr(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ya(r),t.memoizedState=Ja,e):Xl(t,l));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return Zm(e,t,l,n,o,s,r);if(a){a=n.fallback,l=t.mode,s=e.child,o=s.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=$t(s,c),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?a=$t(o,a):(a=rr(a,l,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,l=e.child.memoizedState,l=l===null?Ya(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=Ja,n}return a=e.child,e=a.sibling,n=$t(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Xl(e,t){return t=bi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xs(e,t,r,n){return n!==null&&Ml(n),Br(t,e.child,null,r),e=Xl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zm(e,t,r,n,s,a,l){if(r)return t.flags&256?(t.flags&=-257,n=sa(Error(k(422))),xs(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=bi({mode:"visible",children:n.children},s,0,null),a=rr(a,s,l,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Br(t,e.child,null,l),t.child.memoizedState=Ya(l),t.memoizedState=Ja,a);if(!(t.mode&1))return xs(e,t,l,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,a=Error(k(419)),n=sa(a,n,void 0),xs(e,t,l,n)}if(o=(l&e.childLanes)!==0,_e||o){if(n=se,n!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ht(e,s),Ge(n,e,s,-1))}return so(),n=sa(Error(k(421))),xs(e,t,l,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=hp.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Ee=Tt(s.nextSibling),Pe=t,W=!0,Ve=null,e!==null&&(Oe[$e++]=at,Oe[$e++]=lt,Oe[$e++]=sr,at=e.id,lt=e.overflow,sr=t),t=Xl(t,n.children),t.flags|=4096,t)}function xc(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ka(e.return,t,r)}function ia(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function Gd(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(ge(e,t,n.children,r),n=V.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xc(e,r,t);else if(e.tag===19)xc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(B(V,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ei(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ia(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ei(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ia(t,!0,r,null,a);break;case"together":ia(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Os(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ft(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(k(153));if(t.child!==null){for(e=t.child,r=$t(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=$t(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ep(e,t,r){switch(t.tag){case 3:Vd(t),qr();break;case 5:jd(t);break;case 1:ke(t.type)&&Qs(t);break;case 4:Kl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;B(Ys,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(B(V,V.current&1),t.flags|=128,null):r&t.child.childLanes?Qd(e,t,r):(B(V,V.current&1),e=ft(e,t,r),e!==null?e.sibling:null);B(V,V.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Gd(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),B(V,V.current),n)break;return null;case 22:case 23:return t.lanes=0,Hd(e,t,r)}return ft(e,t,r)}var Jd,Xa,Yd,Xd;Jd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xa=function(){};Yd=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,er(tt.current);var a=null;switch(r){case"input":s=wa(e,s),n=wa(e,n),a=[];break;case"select":s=G({},s,{value:void 0}),n=G({},n,{value:void 0}),a=[];break;case"textarea":s=_a(e,s),n=_a(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ws)}ka(r,n);var l;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pn.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(o=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&K("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Xd=function(e,t,r,n){r!==n&&(t.flags|=4)};function cn(e,t){if(!W)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function de(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function tp(e,t,r){var n=t.pendingProps;switch(Dl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(t),null;case 1:return ke(t.type)&&Vs(),de(t),null;case 3:return n=t.stateNode,Kr(),H(Ne),H(me),Wl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ps(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ve!==null&&(al(Ve),Ve=null))),Xa(e,t),de(t),null;case 5:Hl(t);var s=er(Fn.current);if(r=t.type,e!==null&&t.stateNode!=null)Yd(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(k(166));return de(t),null}if(e=er(tt.current),ps(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Ze]=t,n[Un]=a,e=(t.mode&1)!==0,r){case"dialog":K("cancel",n),K("close",n);break;case"iframe":case"object":case"embed":K("load",n);break;case"video":case"audio":for(s=0;s<pn.length;s++)K(pn[s],n);break;case"source":K("error",n);break;case"img":case"image":case"link":K("error",n),K("load",n);break;case"details":K("toggle",n);break;case"input":So(n,a),K("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},K("invalid",n);break;case"textarea":Eo(n,a),K("invalid",n)}ka(r,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?n.textContent!==o&&(a.suppressHydrationWarning!==!0&&ms(n.textContent,o,e),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&ms(n.textContent,o,e),s=["children",""+o]):Pn.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&K("scroll",n)}switch(r){case"input":as(n),Co(n,a,!0);break;case"textarea":as(n),Po(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ws)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Su(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),r==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Ze]=t,e[Un]=n,Jd(e,t,!1,!1),t.stateNode=e;e:{switch(l=Sa(r,n),r){case"dialog":K("cancel",e),K("close",e),s=n;break;case"iframe":case"object":case"embed":K("load",e),s=n;break;case"video":case"audio":for(s=0;s<pn.length;s++)K(pn[s],e);s=n;break;case"source":K("error",e),s=n;break;case"img":case"image":case"link":K("error",e),K("load",e),s=n;break;case"details":K("toggle",e),s=n;break;case"input":So(e,n),s=wa(e,n),K("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=G({},n,{value:void 0}),K("invalid",e);break;case"textarea":Eo(e,n),s=_a(e,n),K("invalid",e);break;default:s=n}ka(r,s),o=s;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Pu(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cu(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Rn(e,c):typeof c=="number"&&Rn(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Pn.hasOwnProperty(a)?c!=null&&a==="onScroll"&&K("scroll",e):c!=null&&bl(e,a,c,l))}switch(r){case"input":as(e),Co(e,n,!1);break;case"textarea":as(e),Po(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Dt(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Lr(e,!!n.multiple,a,!1):n.defaultValue!=null&&Lr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ws)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return de(t),null;case 6:if(e&&t.stateNode!=null)Xd(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(k(166));if(r=er(Fn.current),er(tt.current),ps(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ze]=t,(a=n.nodeValue!==r)&&(e=Pe,e!==null))switch(e.tag){case 3:ms(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ms(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ze]=t,t.stateNode=n}return de(t),null;case 13:if(H(V),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(W&&Ee!==null&&t.mode&1&&!(t.flags&128))gd(),qr(),t.flags|=98560,a=!1;else if(a=ps(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(k(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(k(317));a[Ze]=t}else qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;de(t),a=!1}else Ve!==null&&(al(Ve),Ve=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||V.current&1?ee===0&&(ee=3):so())),t.updateQueue!==null&&(t.flags|=4),de(t),null);case 4:return Kr(),Xa(e,t),e===null&&Dn(t.stateNode.containerInfo),de(t),null;case 10:return Fl(t.type._context),de(t),null;case 17:return ke(t.type)&&Vs(),de(t),null;case 19:if(H(V),a=t.memoizedState,a===null)return de(t),null;if(n=(t.flags&128)!==0,l=a.rendering,l===null)if(n)cn(a,!1);else{if(ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ei(e),l!==null){for(t.flags|=128,cn(a,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return B(V,V.current&1|2),t.child}e=e.sibling}a.tail!==null&&Y()>Wr&&(t.flags|=128,n=!0,cn(a,!1),t.lanes=4194304)}else{if(!n)if(e=ei(l),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),cn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!W)return de(t),null}else 2*Y()-a.renderingStartTime>Wr&&r!==1073741824&&(t.flags|=128,n=!0,cn(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Y(),t.sibling=null,r=V.current,B(V,n?r&1|2:r&1),t):(de(t),null);case 22:case 23:return no(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ce&1073741824&&(de(t),t.subtreeFlags&6&&(t.flags|=8192)):de(t),null;case 24:return null;case 25:return null}throw Error(k(156,t.tag))}function rp(e,t){switch(Dl(t),t.tag){case 1:return ke(t.type)&&Vs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kr(),H(Ne),H(me),Wl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Hl(t),null;case 13:if(H(V),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(k(340));qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(V),null;case 4:return Kr(),null;case 10:return Fl(t.type._context),null;case 22:case 23:return no(),null;case 24:return null;default:return null}}var ys=!1,he=!1,np=typeof WeakSet=="function"?WeakSet:Set,P=null;function Tr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){J(e,t,n)}else r.current=null}function Za(e,t,r){try{r()}catch(n){J(e,t,n)}}var yc=!1;function sp(e,t){if(Ia=Bs,e=nd(),$l(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var x;h!==r||s!==0&&h.nodeType!==3||(o=l+s),h!==a||n!==0&&h.nodeType!==3||(c=l+n),h.nodeType===3&&(l+=h.nodeValue.length),(x=h.firstChild)!==null;)m=h,h=x;for(;;){if(h===e)break t;if(m===r&&++u===s&&(o=l),m===a&&++d===n&&(c=l),(x=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=x}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Da={focusedElem:e,selectionRange:r},Bs=!1,P=t;P!==null;)if(t=P,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,P=e;else for(;P!==null;){t=P;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,b=v.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?w:Ke(t.type,w),b);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(j){J(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,P=e;break}P=t.return}return v=yc,yc=!1,v}function _n(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Za(t,r,a)}s=s.next}while(s!==n)}}function wi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function el(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Zd(e){var t=e.alternate;t!==null&&(e.alternate=null,Zd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ze],delete t[Un],delete t[za],delete t[zm],delete t[Fm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function eh(e){return e.tag===5||e.tag===3||e.tag===4}function vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||eh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ws));else if(n!==4&&(e=e.child,e!==null))for(tl(e,t,r),e=e.sibling;e!==null;)tl(e,t,r),e=e.sibling}function rl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(rl(e,t,r),e=e.sibling;e!==null;)rl(e,t,r),e=e.sibling}var ae=null,He=!1;function xt(e,t,r){for(r=r.child;r!==null;)th(e,t,r),r=r.sibling}function th(e,t,r){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(hi,r)}catch{}switch(r.tag){case 5:he||Tr(r,t);case 6:var n=ae,s=He;ae=null,xt(e,t,r),ae=n,He=s,ae!==null&&(He?(e=ae,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ae.removeChild(r.stateNode));break;case 18:ae!==null&&(He?(e=ae,r=r.stateNode,e.nodeType===8?Xi(e.parentNode,r):e.nodeType===1&&Xi(e,r),On(e)):Xi(ae,r.stateNode));break;case 4:n=ae,s=He,ae=r.stateNode.containerInfo,He=!0,xt(e,t,r),ae=n,He=s;break;case 0:case 11:case 14:case 15:if(!he&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Za(r,t,l),s=s.next}while(s!==n)}xt(e,t,r);break;case 1:if(!he&&(Tr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){J(r,t,o)}xt(e,t,r);break;case 21:xt(e,t,r);break;case 22:r.mode&1?(he=(n=he)||r.memoizedState!==null,xt(e,t,r),he=n):xt(e,t,r);break;default:xt(e,t,r)}}function wc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new np),t.forEach(function(n){var s=fp.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function qe(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:ae=o.stateNode,He=!1;break e;case 3:ae=o.stateNode.containerInfo,He=!0;break e;case 4:ae=o.stateNode.containerInfo,He=!0;break e}o=o.return}if(ae===null)throw Error(k(160));th(a,l,s),ae=null,He=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){J(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rh(t,e),t=t.sibling}function rh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qe(t,e),Ye(e),n&4){try{_n(3,e,e.return),wi(3,e)}catch(w){J(e,e.return,w)}try{_n(5,e,e.return)}catch(w){J(e,e.return,w)}}break;case 1:qe(t,e),Ye(e),n&512&&r!==null&&Tr(r,r.return);break;case 5:if(qe(t,e),Ye(e),n&512&&r!==null&&Tr(r,r.return),e.flags&32){var s=e.stateNode;try{Rn(s,"")}catch(w){J(e,e.return,w)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&Nu(s,a),Sa(o,l);var u=Sa(o,a);for(l=0;l<c.length;l+=2){var d=c[l],h=c[l+1];d==="style"?Pu(s,h):d==="dangerouslySetInnerHTML"?Cu(s,h):d==="children"?Rn(s,h):bl(s,d,h,u)}switch(o){case"input":ja(s,a);break;case"textarea":ku(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?Lr(s,!!a.multiple,x,!1):m!==!!a.multiple&&(a.defaultValue!=null?Lr(s,!!a.multiple,a.defaultValue,!0):Lr(s,!!a.multiple,a.multiple?[]:"",!1))}s[Un]=a}catch(w){J(e,e.return,w)}}break;case 6:if(qe(t,e),Ye(e),n&4){if(e.stateNode===null)throw Error(k(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(w){J(e,e.return,w)}}break;case 3:if(qe(t,e),Ye(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{On(t.containerInfo)}catch(w){J(e,e.return,w)}break;case 4:qe(t,e),Ye(e);break;case 13:qe(t,e),Ye(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(to=Y())),n&4&&wc(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(he=(u=he)||d,qe(t,e),he=u):qe(t,e),Ye(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(P=e,d=e.child;d!==null;){for(h=P=d;P!==null;){switch(m=P,x=m.child,m.tag){case 0:case 11:case 14:case 15:_n(4,m,m.return);break;case 1:Tr(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){J(n,r,w)}}break;case 5:Tr(m,m.return);break;case 22:if(m.memoizedState!==null){bc(h);continue}}x!==null?(x.return=m,P=x):bc(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Eu("display",l))}catch(w){J(e,e.return,w)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){J(e,e.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qe(t,e),Ye(e),n&4&&wc(e);break;case 21:break;default:qe(t,e),Ye(e)}}function Ye(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(eh(r)){var n=r;break e}r=r.return}throw Error(k(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Rn(s,""),n.flags&=-33);var a=vc(e);rl(e,a,s);break;case 3:case 4:var l=n.stateNode.containerInfo,o=vc(e);tl(e,o,l);break;default:throw Error(k(161))}}catch(c){J(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ip(e,t,r){P=e,nh(e)}function nh(e,t,r){for(var n=(e.mode&1)!==0;P!==null;){var s=P,a=s.child;if(s.tag===22&&n){var l=s.memoizedState!==null||ys;if(!l){var o=s.alternate,c=o!==null&&o.memoizedState!==null||he;o=ys;var u=he;if(ys=l,(he=c)&&!u)for(P=s;P!==null;)l=P,c=l.child,l.tag===22&&l.memoizedState!==null?_c(s):c!==null?(c.return=l,P=c):_c(s);for(;a!==null;)P=a,nh(a),a=a.sibling;P=s,ys=o,he=u}jc(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,P=a):jc(e)}}function jc(e){for(;P!==null;){var t=P;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:he||wi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!he)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ke(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ic(t,a,n);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ic(t,l,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&On(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(k(163))}he||t.flags&512&&el(t)}catch(m){J(t,t.return,m)}}if(t===e){P=null;break}if(r=t.sibling,r!==null){r.return=t.return,P=r;break}P=t.return}}function bc(e){for(;P!==null;){var t=P;if(t===e){P=null;break}var r=t.sibling;if(r!==null){r.return=t.return,P=r;break}P=t.return}}function _c(e){for(;P!==null;){var t=P;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{wi(4,t)}catch(c){J(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){J(t,s,c)}}var a=t.return;try{el(t)}catch(c){J(t,a,c)}break;case 5:var l=t.return;try{el(t)}catch(c){J(t,l,c)}}}catch(c){J(t,t.return,c)}if(t===e){P=null;break}var o=t.sibling;if(o!==null){o.return=t.return,P=o;break}P=t.return}}var ap=Math.ceil,ni=pt.ReactCurrentDispatcher,Zl=pt.ReactCurrentOwner,De=pt.ReactCurrentBatchConfig,z=0,se=null,X=null,le=0,Ce=0,Ar=Ft(0),ee=0,Hn=null,ar=0,ji=0,eo=0,Nn=null,je=null,to=0,Wr=1/0,nt=null,si=!1,nl=null,Lt=null,vs=!1,Ct=null,ii=0,kn=0,sl=null,$s=-1,Is=0;function xe(){return z&6?Y():$s!==-1?$s:$s=Y()}function Ot(e){return e.mode&1?z&2&&le!==0?le&-le:Bm.transition!==null?(Is===0&&(Is=Fu()),Is):(e=F,e!==0||(e=window.event,e=e===void 0?16:Qu(e.type)),e):1}function Ge(e,t,r,n){if(50<kn)throw kn=0,sl=null,Error(k(185));Gn(e,r,n),(!(z&2)||e!==se)&&(e===se&&(!(z&2)&&(ji|=r),ee===4&&_t(e,le)),Se(e,n),r===1&&z===0&&!(t.mode&1)&&(Wr=Y()+500,xi&&qt()))}function Se(e,t){var r=e.callbackNode;Bf(e,t);var n=qs(e,e===se?le:0);if(n===0)r!==null&&Ao(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ao(r),t===1)e.tag===0?qm(Nc.bind(null,e)):fd(Nc.bind(null,e)),Mm(function(){!(z&6)&&qt()}),r=null;else{switch(qu(n)){case 1:r=Cl;break;case 4:r=Uu;break;case 16:r=Fs;break;case 536870912:r=zu;break;default:r=Fs}r=dh(r,sh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function sh(e,t){if($s=-1,Is=0,z&6)throw Error(k(327));var r=e.callbackNode;if(Mr()&&e.callbackNode!==r)return null;var n=qs(e,e===se?le:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ai(e,n);else{t=n;var s=z;z|=2;var a=ah();(se!==e||le!==t)&&(nt=null,Wr=Y()+500,tr(e,t));do try{cp();break}catch(o){ih(e,o)}while(!0);zl(),ni.current=a,z=s,X!==null?t=0:(se=null,le=0,t=ee)}if(t!==0){if(t===2&&(s=Ta(e),s!==0&&(n=s,t=il(e,s))),t===1)throw r=Hn,tr(e,0),_t(e,n),Se(e,Y()),r;if(t===6)_t(e,n);else{if(s=e.current.alternate,!(n&30)&&!lp(s)&&(t=ai(e,n),t===2&&(a=Ta(e),a!==0&&(n=a,t=il(e,a))),t===1))throw r=Hn,tr(e,0),_t(e,n),Se(e,Y()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(k(345));case 2:Qt(e,je,nt);break;case 3:if(_t(e,n),(n&130023424)===n&&(t=to+500-Y(),10<t)){if(qs(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){xe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ua(Qt.bind(null,e,je,nt),t);break}Qt(e,je,nt);break;case 4:if(_t(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var l=31-Qe(n);a=1<<l,l=t[l],l>s&&(s=l),n&=~a}if(n=s,n=Y()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ap(n/1960))-n,10<n){e.timeoutHandle=Ua(Qt.bind(null,e,je,nt),n);break}Qt(e,je,nt);break;case 5:Qt(e,je,nt);break;default:throw Error(k(329))}}}return Se(e,Y()),e.callbackNode===r?sh.bind(null,e):null}function il(e,t){var r=Nn;return e.current.memoizedState.isDehydrated&&(tr(e,t).flags|=256),e=ai(e,t),e!==2&&(t=je,je=r,t!==null&&al(t)),e}function al(e){je===null?je=e:je.push.apply(je,e)}function lp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Je(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _t(e,t){for(t&=~eo,t&=~ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Qe(t),n=1<<r;e[r]=-1,t&=~n}}function Nc(e){if(z&6)throw Error(k(327));Mr();var t=qs(e,0);if(!(t&1))return Se(e,Y()),null;var r=ai(e,t);if(e.tag!==0&&r===2){var n=Ta(e);n!==0&&(t=n,r=il(e,n))}if(r===1)throw r=Hn,tr(e,0),_t(e,t),Se(e,Y()),r;if(r===6)throw Error(k(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qt(e,je,nt),Se(e,Y()),null}function ro(e,t){var r=z;z|=1;try{return e(t)}finally{z=r,z===0&&(Wr=Y()+500,xi&&qt())}}function lr(e){Ct!==null&&Ct.tag===0&&!(z&6)&&Mr();var t=z;z|=1;var r=De.transition,n=F;try{if(De.transition=null,F=1,e)return e()}finally{F=n,De.transition=r,z=t,!(z&6)&&qt()}}function no(){Ce=Ar.current,H(Ar)}function tr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Dm(r)),X!==null)for(r=X.return;r!==null;){var n=r;switch(Dl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Vs();break;case 3:Kr(),H(Ne),H(me),Wl();break;case 5:Hl(n);break;case 4:Kr();break;case 13:H(V);break;case 19:H(V);break;case 10:Fl(n.type._context);break;case 22:case 23:no()}r=r.return}if(se=e,X=e=$t(e.current,null),le=Ce=t,ee=0,Hn=null,eo=ji=ar=0,je=Nn=null,Zt!==null){for(t=0;t<Zt.length;t++)if(r=Zt[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var l=a.next;a.next=s,n.next=l}r.pending=n}Zt=null}return e}function ih(e,t){do{var r=X;try{if(zl(),As.current=ri,ti){for(var n=Q.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ti=!1}if(ir=0,ne=Z=Q=null,bn=!1,qn=0,Zl.current=null,r===null||r.return===null){ee=1,Hn=t,X=null;break}e:{var a=e,l=r.return,o=r,c=t;if(t=le,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=dc(l);if(x!==null){x.flags&=-257,hc(x,l,o,a,t),x.mode&1&&uc(a,u,t),t=x,c=u;var v=t.updateQueue;if(v===null){var w=new Set;w.add(c),t.updateQueue=w}else v.add(c);break e}else{if(!(t&1)){uc(a,u,t),so();break e}c=Error(k(426))}}else if(W&&o.mode&1){var b=dc(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),hc(b,l,o,a,t),Ml(Hr(c,o));break e}}a=c=Hr(c,o),ee!==4&&(ee=2),Nn===null?Nn=[a]:Nn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=qd(a,c,t);sc(a,g);break e;case 1:o=c;var f=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Lt===null||!Lt.has(p)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=Bd(a,o,t);sc(a,j);break e}}a=a.return}while(a!==null)}oh(r)}catch(_){t=_,X===r&&r!==null&&(X=r=r.return);continue}break}while(!0)}function ah(){var e=ni.current;return ni.current=ri,e===null?ri:e}function so(){(ee===0||ee===3||ee===2)&&(ee=4),se===null||!(ar&268435455)&&!(ji&268435455)||_t(se,le)}function ai(e,t){var r=z;z|=2;var n=ah();(se!==e||le!==t)&&(nt=null,tr(e,t));do try{op();break}catch(s){ih(e,s)}while(!0);if(zl(),z=r,ni.current=n,X!==null)throw Error(k(261));return se=null,le=0,ee}function op(){for(;X!==null;)lh(X)}function cp(){for(;X!==null&&!Of();)lh(X)}function lh(e){var t=uh(e.alternate,e,Ce);e.memoizedProps=e.pendingProps,t===null?oh(e):X=t,Zl.current=null}function oh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=rp(r,t),r!==null){r.flags&=32767,X=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ee=6,X=null;return}}else if(r=tp(r,t,Ce),r!==null){X=r;return}if(t=t.sibling,t!==null){X=t;return}X=t=e}while(t!==null);ee===0&&(ee=5)}function Qt(e,t,r){var n=F,s=De.transition;try{De.transition=null,F=1,up(e,t,r,n)}finally{De.transition=s,F=n}return null}function up(e,t,r,n){do Mr();while(Ct!==null);if(z&6)throw Error(k(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(k(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(Kf(e,a),e===se&&(X=se=null,le=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||vs||(vs=!0,dh(Fs,function(){return Mr(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=De.transition,De.transition=null;var l=F;F=1;var o=z;z|=4,Zl.current=null,sp(e,r),rh(r,e),Rm(Da),Bs=!!Ia,Da=Ia=null,e.current=r,ip(r),$f(),z=o,F=l,De.transition=a}else e.current=r;if(vs&&(vs=!1,Ct=e,ii=s),a=e.pendingLanes,a===0&&(Lt=null),Mf(r.stateNode),Se(e,Y()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(si)throw si=!1,e=nl,nl=null,e;return ii&1&&e.tag!==0&&Mr(),a=e.pendingLanes,a&1?e===sl?kn++:(kn=0,sl=e):kn=0,qt(),null}function Mr(){if(Ct!==null){var e=qu(ii),t=De.transition,r=F;try{if(De.transition=null,F=16>e?16:e,Ct===null)var n=!1;else{if(e=Ct,Ct=null,ii=0,z&6)throw Error(k(331));var s=z;for(z|=4,P=e.current;P!==null;){var a=P,l=a.child;if(P.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(P=u;P!==null;){var d=P;switch(d.tag){case 0:case 11:case 15:_n(8,d,a)}var h=d.child;if(h!==null)h.return=d,P=h;else for(;P!==null;){d=P;var m=d.sibling,x=d.return;if(Zd(d),d===u){P=null;break}if(m!==null){m.return=x,P=m;break}P=x}}}var v=a.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}P=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,P=l;else e:for(;P!==null;){if(a=P,a.flags&2048)switch(a.tag){case 0:case 11:case 15:_n(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,P=g;break e}P=a.return}}var f=e.current;for(P=f;P!==null;){l=P;var p=l.child;if(l.subtreeFlags&2064&&p!==null)p.return=l,P=p;else e:for(l=f;P!==null;){if(o=P,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:wi(9,o)}}catch(_){J(o,o.return,_)}if(o===l){P=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,P=j;break e}P=o.return}}if(z=s,qt(),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(hi,e)}catch{}n=!0}return n}finally{F=r,De.transition=t}}return!1}function kc(e,t,r){t=Hr(r,t),t=qd(e,t,1),e=At(e,t,1),t=xe(),e!==null&&(Gn(e,1,t),Se(e,t))}function J(e,t,r){if(e.tag===3)kc(e,e,r);else for(;t!==null;){if(t.tag===3){kc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Lt===null||!Lt.has(n))){e=Hr(r,e),e=Bd(t,e,1),t=At(t,e,1),e=xe(),t!==null&&(Gn(t,1,e),Se(t,e));break}}t=t.return}}function dp(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xe(),e.pingedLanes|=e.suspendedLanes&r,se===e&&(le&r)===r&&(ee===4||ee===3&&(le&130023424)===le&&500>Y()-to?tr(e,0):eo|=r),Se(e,t)}function ch(e,t){t===0&&(e.mode&1?(t=cs,cs<<=1,!(cs&130023424)&&(cs=4194304)):t=1);var r=xe();e=ht(e,t),e!==null&&(Gn(e,t,r),Se(e,r))}function hp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ch(e,r)}function fp(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(k(314))}n!==null&&n.delete(t),ch(e,r)}var uh;uh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ne.current)_e=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return _e=!1,ep(e,t,r);_e=!!(e.flags&131072)}else _e=!1,W&&t.flags&1048576&&md(t,Js,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Os(e,t),e=t.pendingProps;var s=Fr(t,me.current);Dr(t,r),s=Ql(null,t,n,e,s,r);var a=Gl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ke(n)?(a=!0,Qs(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bl(t),s.updater=vi,t.stateNode=s,s._reactInternals=t,Wa(t,n,e,r),t=Ga(null,t,n,!0,a,r)):(t.tag=0,W&&a&&Il(t),ge(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Os(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=pp(n),e=Ke(n,e),s){case 0:t=Qa(null,t,n,e,r);break e;case 1:t=pc(null,t,n,e,r);break e;case 11:t=fc(null,t,n,e,r);break e;case 14:t=mc(null,t,n,Ke(n.type,e),r);break e}throw Error(k(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ke(n,s),Qa(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ke(n,s),pc(e,t,n,s,r);case 3:e:{if(Vd(t),e===null)throw Error(k(387));n=t.pendingProps,a=t.memoizedState,s=a.element,wd(e,t),Zs(t,n,null,r);var l=t.memoizedState;if(n=l.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Hr(Error(k(423)),t),t=gc(e,t,n,r,s);break e}else if(n!==s){s=Hr(Error(k(424)),t),t=gc(e,t,n,r,s);break e}else for(Ee=Tt(t.stateNode.containerInfo.firstChild),Pe=t,W=!0,Ve=null,r=yd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qr(),n===s){t=ft(e,t,r);break e}ge(e,t,n,r)}t=t.child}return t;case 5:return jd(t),e===null&&Ba(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,l=s.children,Ma(n,s)?l=null:a!==null&&Ma(n,a)&&(t.flags|=32),Wd(e,t),ge(e,t,l,r),t.child;case 6:return e===null&&Ba(t),null;case 13:return Qd(e,t,r);case 4:return Kl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Br(t,null,n,r):ge(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ke(n,s),fc(e,t,n,s,r);case 7:return ge(e,t,t.pendingProps,r),t.child;case 8:return ge(e,t,t.pendingProps.children,r),t.child;case 12:return ge(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,l=s.value,B(Ys,n._currentValue),n._currentValue=l,a!==null)if(Je(a.value,l)){if(a.children===s.children&&!Ne.current){t=ft(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=ot(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Ka(a.return,r,t),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(k(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),Ka(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}ge(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Dr(t,r),s=Ue(s),n=n(s),t.flags|=1,ge(e,t,n,r),t.child;case 14:return n=t.type,s=Ke(n,t.pendingProps),s=Ke(n.type,s),mc(e,t,n,s,r);case 15:return Kd(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ke(n,s),Os(e,t),t.tag=1,ke(n)?(e=!0,Qs(t)):e=!1,Dr(t,r),Fd(t,n,s),Wa(t,n,s,r),Ga(null,t,n,!0,e,r);case 19:return Gd(e,t,r);case 22:return Hd(e,t,r)}throw Error(k(156,t.tag))};function dh(e,t){return Mu(e,t)}function mp(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ie(e,t,r,n){return new mp(e,t,r,n)}function io(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pp(e){if(typeof e=="function")return io(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Nl)return 11;if(e===kl)return 14}return 2}function $t(e,t){var r=e.alternate;return r===null?(r=Ie(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ds(e,t,r,n,s,a){var l=2;if(n=e,typeof e=="function")io(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case br:return rr(r.children,s,a,t);case _l:l=8,s|=8;break;case ga:return e=Ie(12,r,t,s|2),e.elementType=ga,e.lanes=a,e;case xa:return e=Ie(13,r,t,s),e.elementType=xa,e.lanes=a,e;case ya:return e=Ie(19,r,t,s),e.elementType=ya,e.lanes=a,e;case ju:return bi(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vu:l=10;break e;case wu:l=9;break e;case Nl:l=11;break e;case kl:l=14;break e;case vt:l=16,n=null;break e}throw Error(k(130,e==null?e:typeof e,""))}return t=Ie(l,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function rr(e,t,r,n){return e=Ie(7,e,n,t),e.lanes=r,e}function bi(e,t,r,n){return e=Ie(22,e,n,t),e.elementType=ju,e.lanes=r,e.stateNode={isHidden:!1},e}function aa(e,t,r){return e=Ie(6,e,null,t),e.lanes=r,e}function la(e,t,r){return t=Ie(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gp(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ao(e,t,r,n,s,a,l,o,c){return e=new gp(e,t,r,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ie(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bl(a),e}function xp(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function hh(e){if(!e)return Mt;e=e._reactInternals;e:{if(hr(e)!==e||e.tag!==1)throw Error(k(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ke(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(k(171))}if(e.tag===1){var r=e.type;if(ke(r))return hd(e,r,t)}return t}function fh(e,t,r,n,s,a,l,o,c){return e=ao(r,n,!0,e,s,a,l,o,c),e.context=hh(null),r=e.current,n=xe(),s=Ot(r),a=ot(n,s),a.callback=t??null,At(r,a,s),e.current.lanes=s,Gn(e,s,n),Se(e,n),e}function _i(e,t,r,n){var s=t.current,a=xe(),l=Ot(s);return r=hh(r),t.context===null?t.context=r:t.pendingContext=r,t=ot(a,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=At(s,t,l),e!==null&&(Ge(e,s,l,a),Ts(e,s,l)),l}function li(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function lo(e,t){Sc(e,t),(e=e.alternate)&&Sc(e,t)}function yp(){return null}var mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function oo(e){this._internalRoot=e}Ni.prototype.render=oo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(k(409));_i(e,t,null,null)};Ni.prototype.unmount=oo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){_i(null,e,null,null)}),t[dt]=null}};function Ni(e){this._internalRoot=e}Ni.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bt.length&&t!==0&&t<bt[r].priority;r++);bt.splice(r,0,e),r===0&&Vu(e)}};function co(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ki(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cc(){}function vp(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=li(l);a.call(u)}}var l=fh(t,n,e,0,null,!1,!1,"",Cc);return e._reactRootContainer=l,e[dt]=l.current,Dn(e.nodeType===8?e.parentNode:e),lr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var u=li(c);o.call(u)}}var c=ao(e,0,!1,null,null,!1,!1,"",Cc);return e._reactRootContainer=c,e[dt]=c.current,Dn(e.nodeType===8?e.parentNode:e),lr(function(){_i(t,c,r,n)}),c}function Si(e,t,r,n,s){var a=r._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var o=s;s=function(){var c=li(l);o.call(c)}}_i(t,l,e,s)}else l=vp(r,t,e,s,n);return li(l)}Bu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=mn(t.pendingLanes);r!==0&&(El(t,r|1),Se(t,Y()),!(z&6)&&(Wr=Y()+500,qt()))}break;case 13:lr(function(){var n=ht(e,1);if(n!==null){var s=xe();Ge(n,e,1,s)}}),lo(e,1)}};Pl=function(e){if(e.tag===13){var t=ht(e,134217728);if(t!==null){var r=xe();Ge(t,e,134217728,r)}lo(e,134217728)}};Ku=function(e){if(e.tag===13){var t=Ot(e),r=ht(e,t);if(r!==null){var n=xe();Ge(r,e,t,n)}lo(e,t)}};Hu=function(){return F};Wu=function(e,t){var r=F;try{return F=e,t()}finally{F=r}};Ea=function(e,t,r){switch(t){case"input":if(ja(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=gi(n);if(!s)throw Error(k(90));_u(n),ja(n,s)}}}break;case"textarea":ku(e,r);break;case"select":t=r.value,t!=null&&Lr(e,!!r.multiple,t,!1)}};Au=ro;Lu=lr;var wp={usingClientEntryPoint:!1,Events:[Yn,Sr,gi,Ru,Tu,ro]},un={findFiberByHostInstance:Xt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jp={bundleType:un.bundleType,version:un.version,rendererPackageName:un.rendererPackageName,rendererConfig:un.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Iu(e),e===null?null:e.stateNode},findFiberByHostInstance:un.findFiberByHostInstance||yp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ws=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ws.isDisabled&&ws.supportsFiber)try{hi=ws.inject(jp),et=ws}catch{}}Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wp;Te.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!co(t))throw Error(k(200));return xp(e,t,null,r)};Te.createRoot=function(e,t){if(!co(e))throw Error(k(299));var r=!1,n="",s=mh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ao(e,1,!1,null,null,r,!1,n,s),e[dt]=t.current,Dn(e.nodeType===8?e.parentNode:e),new oo(t)};Te.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(k(188)):(e=Object.keys(e).join(","),Error(k(268,e)));return e=Iu(t),e=e===null?null:e.stateNode,e};Te.flushSync=function(e){return lr(e)};Te.hydrate=function(e,t,r){if(!ki(t))throw Error(k(200));return Si(null,e,t,!0,r)};Te.hydrateRoot=function(e,t,r){if(!co(e))throw Error(k(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",l=mh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=fh(t,null,e,1,r??null,s,!1,a,l),e[dt]=t.current,Dn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ni(t)};Te.render=function(e,t,r){if(!ki(t))throw Error(k(200));return Si(null,e,t,!1,r)};Te.unmountComponentAtNode=function(e){if(!ki(e))throw Error(k(40));return e._reactRootContainer?(lr(function(){Si(null,null,e,!1,function(){e._reactRootContainer=null,e[dt]=null})}),!0):!1};Te.unstable_batchedUpdates=ro;Te.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ki(r))throw Error(k(200));if(e==null||e._reactInternals===void 0)throw Error(k(38));return Si(e,t,r,!1,n)};Te.version="18.3.1-next-f1338f8080-20240426";function ph(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ph)}catch(e){console.error(e)}}ph(),pu.exports=Te;var bp=pu.exports,gh,Ec=bp;gh=Ec.createRoot,Ec.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),U=(e,t)=>{const r=T.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},d)=>T.createElement("svg",{ref:d,..._p,width:s,height:s,stroke:n,strokeWidth:l?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Np(e)}`,o].join(" "),...u},[...t.map(([h,m])=>T.createElement(h,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=U("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=U("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=U("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=U("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=U("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=U("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=U("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=U("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=U("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=U("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=U("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=U("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=U("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=U("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=U("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=U("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=U("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=U("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=U("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=U("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=U("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=U("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=U("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=U("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=U("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=U("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=U("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=U("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=U("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=U("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=U("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=U("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=U("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=U("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=U("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Op=({activeTab:e,onTabChange:t,notificationCount:r,userRole:n})=>{const l=n==="admin"?[{id:"dashboard",label:"Dashboard",icon:Tc},{id:"payments",label:"Payments",icon:Vr},{id:"kiosks",label:"Kiosks",icon:ct},{id:"customers",label:"Customers",icon:mo},{id:"maintenance",label:"Maintenance",icon:Lc},{id:"refill-management",label:"Refill Management",icon:Ut},{id:"revenue",label:"Revenue",icon:ur},{id:"refunds",label:"Refunds",icon:wh},{id:"refund-tickets",label:"Refund Tickets",icon:Ac},{id:"razorpay-integration",label:"Razorpay Integration",icon:oi},{id:"notifications",label:"Notifications",icon:or,badge:r},{id:"add-kiosk",label:"Add Kiosk",icon:Rp},{id:"add-customer",label:"Add Customer",icon:Ap},{id:"settings",label:"Settings",icon:cr}]:[{id:"dashboard",label:"My Dashboard",icon:Tc},{id:"my-kiosks",label:"My Kiosks",icon:ct},{id:"my-payments",label:"Payment History",icon:Vr},{id:"my-revenue",label:"Revenue",icon:ur},{id:"maintenance-requests",label:"Maintenance",icon:Lc},{id:"refill-requests",label:"Refill Requests",icon:Ut},{id:"refund-tickets",label:"Refund Requests",icon:Ac},{id:"razorpay-integration",label:"Payment Integration",icon:oi},{id:"notifications",label:"Notifications",icon:or,badge:r},{id:"settings",label:"Settings",icon:cr}];return i.jsx("div",{className:"w-64 bg-gray-900 text-white h-screen fixed left-0 top-0 overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx(ct,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold",children:"KioskPay"}),i.jsx("p",{className:"text-gray-400 text-sm",children:n==="admin"?"Admin Panel":"Customer Portal"})]})]}),i.jsx("nav",{className:"space-y-2",children:l.map(o=>{const c=o.icon;return i.jsxs("button",{onClick:()=>t(o.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${e===o.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}`,children:[i.jsx(c,{className:"w-5 h-5"}),i.jsx("span",{className:"flex-1",children:o.label}),o.badge&&o.badge>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full min-w-[20px] text-center",children:o.badge})]},o.id)})})]})})},$p=({notificationCount:e,user:t,userRole:r,onLogout:n})=>{const[s,a]=T.useState(!1);return i.jsxs("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center flex-1 max-w-md",children:i.jsxs("div",{className:"relative w-full",children:[i.jsx(bh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search payments, kiosks...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(or,{className:"w-6 h-6 text-gray-600 hover:text-gray-800 cursor-pointer"}),e>0&&i.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full min-w-[18px] text-center",children:e})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>a(!s),className:"flex items-center space-x-3 hover:bg-gray-50 rounded-lg p-2 transition-colors",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:i.jsx(Ei,{className:"w-4 h-4 text-white"})}),i.jsxs("div",{className:"hidden sm:block text-left",children:[i.jsx("p",{className:"text-sm font-medium text-gray-700",children:r==="admin"?"Admin User":(t==null?void 0:t.email)||"Customer"}),i.jsx("p",{className:"text-xs text-gray-500",children:r==="admin"?"Administrator":"Customer Portal"})]})]}),s&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[i.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:(t==null?void 0:t.email)||"User"}),i.jsx("p",{className:"text-xs text-gray-500",children:r==="admin"?"Administrator":"Customer"})]}),i.jsxs("button",{onClick:()=>{a(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[i.jsx(cr,{className:"w-4 h-4"}),i.jsx("span",{children:"Settings"})]}),i.jsxs("button",{onClick:()=>{a(!1),n()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[i.jsx(Ep,{className:"w-4 h-4"}),i.jsx("span",{children:"Sign Out"})]})]})]})]})]}),s&&i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)})]})},fe=({title:e,value:t,change:r,changeType:n="neutral",icon:s,iconColor:a})=>{const l={positive:"text-green-600",negative:"text-red-600",neutral:"text-gray-600"}[n];return i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t}),r&&i.jsx("p",{className:`text-sm mt-1 ${l}`,children:r})]}),i.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${a}`,children:i.jsx(s,{className:"w-6 h-6 text-white"})})]})})},Oc=({kiosks:e,notifications:t})=>{const r=e.reduce((l,o)=>l+(o.totalRevenue??0),0),n=e.reduce((l,o)=>l+(o.totalPayments??0),0),s=e.filter(l=>l.status==="active").length,a=e.filter(l=>l.needsRefill).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard Overview"}),i.jsx("p",{className:"text-gray-600",children:"Monitor your kiosk network performance and payments"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(fe,{title:"Total Revenue",value:`${r.toLocaleString()}`,change:"+12.5% from last month",changeType:"positive",icon:ur,iconColor:"bg-green-500"}),i.jsx(fe,{title:"Total Payments",value:n.toLocaleString(),change:"+8.2% from last month",changeType:"positive",icon:Vr,iconColor:"bg-blue-500"}),i.jsx(fe,{title:"Active Kiosks",value:s,change:`${e.length} total kiosks`,changeType:"neutral",icon:ct,iconColor:"bg-purple-500"}),i.jsx(fe,{title:"Refill Alerts",value:a,change:"Immediate attention needed",changeType:a>0?"negative":"positive",icon:It,iconColor:a>0?"bg-red-500":"bg-green-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),i.jsx("div",{className:"space-y-4",children:t.slice(0,5).map(l=>{const o=e.find(c=>c.id===l.kioskId);return i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${l.type==="refill"?"bg-red-500":l.type==="payment"?"bg-green-500":"bg-yellow-500"}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-gray-900",children:l.message}),i.jsxs("p",{className:"text-xs text-gray-500",children:[o==null?void 0:o.name,"  ",l.timestamp.toLocaleTimeString()]})]})]},l.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kiosk Status"}),i.jsx("div",{className:"space-y-4",children:e.map(l=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${l.status==="active"?"bg-green-500":l.status==="maintenance"?"bg-red-500":"bg-gray-400"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.name}),i.jsx("p",{className:"text-xs text-gray-500",children:l.location})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",(l.totalRevenue??0).toLocaleString()]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[l.totalPayments??0," payments"]})]})]},l.id))})]})]})]})},$c=({kiosks:e,onRefund:t})=>{const r=e.flatMap(h=>h.payments.map(m=>({...m,kioskName:h.name}))),[n,s]=T.useState(""),[a,l]=T.useState("all"),[o,c]=T.useState(null),u=r.filter(h=>{const m=(h.razorpayPaymentId||"").toLowerCase().includes(n.toLowerCase())||(h.customerPhone||"").includes(n),x=a==="all"||h.status===a;return m&&x}).sort((h,m)=>new Date(m.timestamp).getTime()-new Date(h.timestamp).getTime()),d=h=>{switch(h){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";case"refunded":return"bg-gray-100 text-gray-800";case"partial_refund":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment History"}),i.jsx("p",{className:"text-gray-600",children:"Track and manage all payments across your kiosk network"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(bh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search by payment ID or phone...",value:n,onChange:h=>s(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Sp,{className:"w-4 h-4 text-gray-400"}),i.jsxs("select",{value:a,onChange:h=>l(h.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"failed",children:"Failed"}),i.jsx("option",{value:"refunded",children:"Refunded"}),i.jsx("option",{value:"partial_refund",children:"Partial Refund"})]})]}),i.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(kp,{className:"w-4 h-4"}),i.jsx("span",{children:"Export"})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Payment ID"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Kiosk"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Amount"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Date"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Customer"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Actions"})]})}),i.jsx("tbody",{children:u.map(h=>i.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"font-mono text-sm text-gray-900",children:h.razorpayPaymentId?h.razorpayPaymentId.substring(0,20)+"...":"N/A"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-900",children:h.kioskName})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",h.amount,h.refundAmount&&i.jsxs("span",{className:"text-red-600 ml-1",children:["(-",h.refundAmount,")"]})]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(h.status)}`,children:h.status.replace("_"," ").toUpperCase()})}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("span",{className:"text-sm text-gray-900",children:new Date(h.timestamp).toLocaleDateString()}),i.jsx("div",{className:"text-xs text-gray-500",children:new Date(h.timestamp).toLocaleTimeString()})]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-900",children:h.customerPhone||"N/A"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>c(h),className:"p-1 text-gray-400 hover:text-gray-600",title:"View Details",children:i.jsx(ho,{className:"w-4 h-4"})}),h.status==="completed"&&i.jsx("button",{onClick:()=>t(h),className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:"Refund"})]})})]},h.id))})]})}),u.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-500",children:"No payments found matching your criteria."})})]}),o&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Details"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Payment ID"}),i.jsx("p",{className:"text-sm text-gray-900 font-mono",children:o.razorpayPaymentId||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Amount"}),i.jsxs("p",{className:"text-sm text-gray-900",children:["",o.amount]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),i.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${d(o.status)}`,children:o.status.replace("_"," ").toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Timestamp"}),i.jsx("p",{className:"text-sm text-gray-900",children:new Date(o.timestamp).toLocaleString()})]}),o.customerPhone&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Customer Phone"}),i.jsx("p",{className:"text-sm text-gray-900",children:o.customerPhone})]}),o.refundAmount&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Refund Amount"}),i.jsxs("p",{className:"text-sm text-red-600",children:["",o.refundAmount]})]}),o.refundReason&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Refund Reason"}),i.jsx("p",{className:"text-sm text-gray-900",children:o.refundReason})]})]}),i.jsx("button",{onClick:()=>c(null),className:"mt-4 w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})]})})]})},Ip=({kiosks:e,onKioskUpdate:t})=>{var l;const[r,n]=T.useState(null),s=o=>{switch(o){case"active":return"bg-green-500";case"maintenance":return"bg-red-500";case"inactive":return"bg-gray-400";default:return"bg-gray-400"}},a=o=>o>50?"bg-green-500":o>25?"bg-yellow-500":"bg-red-500";return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Kiosk Management"}),i.jsx("p",{className:"text-gray-600",children:"Monitor and manage your helmet cleaning kiosks"})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(o=>{var c;return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${s(o.status)}`}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:o.name})]}),i.jsx("button",{onClick:()=>n(o),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(ho,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[i.jsx(fo,{className:"w-4 h-4"}),i.jsx("span",{children:o.location})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Liquid Level"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full ${a(o.liquidLevel??0)} transition-all duration-300`,style:{width:`${o.liquidLevel??0}%`}})}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[o.liquidLevel??0,"%"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-gray-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Payments"}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:o.totalPayments??0})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Revenue"}),i.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",(o.totalRevenue??0).toLocaleString()]})]})]}),o.needsRefill&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ut,{className:"w-4 h-4 text-red-600"}),i.jsx("span",{className:"text-sm font-medium text-red-700",children:"Refill Required"})]}),i.jsx("p",{className:"text-xs text-red-600 mt-1",children:(o.totalPayments??0)>=250?"Reached 250 payment limit":"Low liquid level"})]}),i.jsxs("div",{className:"flex items-center justify-between pt-3",children:[i.jsxs("span",{className:"text-xs text-gray-500",children:["Last maintenance: ",((c=o.lastMaintenance)==null?void 0:c.toLocaleDateString())??"N/A"]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o.status==="active"?"bg-green-100 text-green-800":o.status==="maintenance"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:o.status.toUpperCase()})]})]})]},o.id)})}),r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:r.name}),i.jsx("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Location"}),i.jsx("p",{className:"text-sm text-gray-900",children:r.location})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"QR Code"}),i.jsx("p",{className:"text-sm text-gray-900 font-mono bg-gray-100 p-2 rounded",children:r.qrCode})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),i.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${r.status==="active"?"bg-green-100 text-green-800":r.status==="maintenance"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:r.status.toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Liquid Level"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full ${a(r.liquidLevel??0)}`,style:{width:`${r.liquidLevel??0}%`}})}),i.jsxs("span",{className:"text-sm text-gray-900",children:[r.liquidLevel??0,"%"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Payments"}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:r.totalPayments??0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Revenue"}),i.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["",(r.totalRevenue??0).toLocaleString()]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Last Maintenance"}),i.jsx("p",{className:"text-sm text-gray-900",children:((l=r.lastMaintenance)==null?void 0:l.toLocaleDateString())??"N/A"})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Payments"}),i.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[(r.payments||[]).slice(0,5).map(o=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:new Date(o.timestamp).toLocaleDateString()}),i.jsxs("span",{className:"font-medium text-gray-900",children:["",o.amount]})]},o.id)),(!r.payments||r.payments.length===0)&&i.jsx("p",{className:"text-xs text-gray-500",children:"No recent payments"})]})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{onClick:()=>{const o={...r,needsRefill:!1,liquidLevel:100};t(o),n(null)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Mark Refilled"}),i.jsx("button",{onClick:()=>{const o={...r,status:r.status==="active"?"maintenance":"active",lastMaintenance:new Date};t(o),n(o)},className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Toggle Status"})]})]})]})})]})},Dp=({kiosks:e,onProcessRefund:t})=>{const[r,n]=T.useState(null),[s,a]=T.useState(""),[l,o]=T.useState(""),[c,u]=T.useState("full"),d=e.flatMap(x=>x.payments.filter(v=>v.status==="completed").map(v=>({...v,kioskName:x.name}))),h=e.flatMap(x=>x.payments.filter(v=>v.status==="refunded"||v.status==="partial_refund").map(v=>({...v,kioskName:x.name}))),m=x=>{if(x.preventDefault(),!r)return;const v={paymentId:r.id,amount:c==="full"?r.amount:parseFloat(s),reason:l,type:c};t(v),n(null),a(""),o(""),u("full")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Refund Management"}),i.jsx("p",{className:"text-gray-600",children:"Process full and partial refunds for customer payments"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[i.jsx(wh,{className:"w-5 h-5 mr-2 text-blue-600"}),"Eligible for Refund (",d.length,")"]}),i.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[d.map(x=>i.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.kioskName}),i.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[(x.razorpayPaymentId||"").substring(0,20),"..."]}),i.jsx("p",{className:"text-xs text-gray-500",children:new Date(x.timestamp).toLocaleDateString()})]}),i.jsxs("div",{className:"text-right mr-3",children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",x.amount]}),x.customerPhone&&i.jsx("p",{className:"text-xs text-gray-500",children:x.customerPhone})]}),i.jsx("button",{onClick:()=>n(x),className:"px-3 py-1 bg-red-100 text-red-700 text-xs rounded hover:bg-red-200 transition-colors",children:"Refund"})]},x.id)),d.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(mt,{className:"w-12 h-12 text-green-500 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-500",children:"No payments eligible for refund"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[i.jsx(mt,{className:"w-5 h-5 mr-2 text-green-600"}),"Refund History (",h.length,")"]}),i.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[h.map(x=>i.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.kioskName}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x.status==="refunded"?"bg-gray-100 text-gray-800":"bg-blue-100 text-blue-800"}`,children:x.status==="refunded"?"Full Refund":"Partial Refund"})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("span",{children:["Original: ",x.amount]}),i.jsxs("span",{children:["Refunded: ",x.refundAmount]})]}),x.refundReason&&i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:x.refundReason}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(x.timestamp).toLocaleDateString()})]},x.id)),h.length===0&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-500",children:"No refunds processed yet"})})]})]})]}),r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx(xh,{className:"w-6 h-6 text-red-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Process Refund"})]}),i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Payment Details"}),i.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[r.kioskName," - ",r.amount]}),i.jsx("p",{className:"text-xs text-gray-500 font-mono",children:r.razorpayPaymentId||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Type"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"refundType",value:"full",checked:c==="full",onChange:x=>u("full"),className:"mr-2"}),i.jsxs("span",{className:"text-sm",children:["Full Refund (",r.amount,")"]})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"refundType",value:"partial",checked:c==="partial",onChange:x=>u("partial"),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Partial Refund"})]})]})]}),c==="partial"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Amount"}),i.jsx("input",{type:"number",min:"1",max:r.amount,step:"0.01",value:s,onChange:x=>a(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Refund"}),i.jsx("textarea",{value:l,onChange:x=>o(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Enter reason for refund",required:!0})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>n(null),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Process Refund"})]})]})]})})]})},Mp="modulepreload",Up=function(e){return"/"+e},Ic={},Zn=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Up(c),c in Ic)return;Ic[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Mp,u||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((m,x)=>{h.addEventListener("load",m),h.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return s.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},zp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Zn(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class po extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Fp extends po{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class qp extends po{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Bp extends po{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ll;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ll||(ll={}));var Kp=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class Hp{constructor(t,{headers:r={},customFetch:n,region:s=ll.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=zp(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Kp(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:l}=r;let o={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let u;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=l):typeof l=="string"?(o["Content-Type"]="text/plain",u=l):typeof FormData<"u"&&l instanceof FormData?u=l:(o["Content-Type"]="application/json",u=JSON.stringify(l)));const d=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:u}).catch(v=>{throw new Fp(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new qp(d);if(!d.ok)throw new Bp(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return m==="application/json"?x=yield d.json():m==="application/octet-stream"?x=yield d.blob():m==="text/event-stream"?x=d:m==="multipart/form-data"?x=yield d.formData():x=yield d.text(),{data:x,error:null}}catch(s){return{data:null,error:s}}})}}var be={},go={},Pi={},es={},Ri={},Ti={},Wp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qr=Wp();const Vp=Qr.fetch,_h=Qr.fetch.bind(Qr),Nh=Qr.Headers,Qp=Qr.Request,Gp=Qr.Response,Xr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Nh,Request:Qp,Response:Gp,default:_h,fetch:Vp},Symbol.toStringTag,{value:"Module"})),Jp=Gh(Xr);var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});let Yp=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ai.default=Yp;var kh=Me&&Me.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ti,"__esModule",{value:!0});const Xp=kh(Jp),Zp=kh(Ai);let e0=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Xp.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var l,o,c;let u=null,d=null,h=null,m=a.status,x=a.statusText;if(a.ok){if(this.method!=="HEAD"){const g=await a.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const w=(l=this.headers.Prefer)===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),b=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");w&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,x="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await a.text();try{u=JSON.parse(w),Array.isArray(u)&&a.status===404&&(d=[],u=null,m=200,x="OK")}catch{a.status===404&&w===""?(m=204,x="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,x="OK"),u&&this.shouldThrowOnError)throw new Zp.default(u)}return{error:u,data:d,count:h,status:m,statusText:x}});return this.shouldThrowOnError||(s=s.catch(a=>{var l,o,c;return{error:{message:`${(l=a==null?void 0:a.name)!==null&&l!==void 0?l:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Ti.default=e0;var t0=Me&&Me.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ri,"__esModule",{value:!0});const r0=t0(Ti);let n0=class extends r0.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",o=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${l}; for="${u}"; options=${c};`,l==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ri.default=n0;var s0=Me&&Me.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(es,"__esModule",{value:!0});const i0=s0(Ri);let a0=class extends i0.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${l}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};es.default=a0;var l0=Me&&Me.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pi,"__esModule",{value:!0});const dn=l0(es);let o0=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),n&&(this.headers.Prefer=`count=${n}`),new dn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(l.length>0){const o=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new dn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const l="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new dn.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new dn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new dn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Pi.default=o0;var Li={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.version=void 0;Oi.version="0.0.0-automated";Object.defineProperty(Li,"__esModule",{value:!0});Li.DEFAULT_HEADERS=void 0;const c0=Oi;Li.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${c0.version}`};var Sh=Me&&Me.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(go,"__esModule",{value:!0});const u0=Sh(Pi),d0=Sh(es),h0=Li;let f0=class Ch{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},h0.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new u0.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ch(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){let l;const o=new URL(`${this.url}/rpc/${t}`);let c;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{o.searchParams.append(d,h)})):(l="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new d0.default({method:l,url:o,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};go.default=f0;var Zr=Me&&Me.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(be,"__esModule",{value:!0});be.PostgrestError=be.PostgrestBuilder=be.PostgrestTransformBuilder=be.PostgrestFilterBuilder=be.PostgrestQueryBuilder=be.PostgrestClient=void 0;const Eh=Zr(go);be.PostgrestClient=Eh.default;const Ph=Zr(Pi);be.PostgrestQueryBuilder=Ph.default;const Rh=Zr(es);be.PostgrestFilterBuilder=Rh.default;const Th=Zr(Ri);be.PostgrestTransformBuilder=Th.default;const Ah=Zr(Ti);be.PostgrestBuilder=Ah.default;const Lh=Zr(Ai);be.PostgrestError=Lh.default;var m0=be.default={PostgrestClient:Eh.default,PostgrestQueryBuilder:Ph.default,PostgrestFilterBuilder:Rh.default,PostgrestTransformBuilder:Th.default,PostgrestBuilder:Ah.default,PostgrestError:Lh.default};const{PostgrestClient:p0,PostgrestQueryBuilder:Lx,PostgrestFilterBuilder:Ox,PostgrestTransformBuilder:$x,PostgrestBuilder:Ix,PostgrestError:Dx}=m0;let ol;typeof window>"u"?ol=require("ws"):ol=window.WebSocket;const g0=ol,x0="2.11.10",y0={"X-Client-Info":`realtime-js/${x0}`},v0="1.0.0",Oh=1e4,w0=1e3;var Ur;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ur||(Ur={}));var pe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pe||(pe={}));var We;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(We||(We={}));var cl;(function(e){e.websocket="websocket"})(cl||(cl={}));var Jt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Jt||(Jt={}));class j0{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+s));l=l+s;const c=n.decode(t.slice(l,l+a));l=l+a;const u=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:u}}}class $h{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(q||(q={}));const Dc=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,l)=>(a[l]=b0(l,e,t,s),a),{})},b0=(e,t,r,n)=>{const s=t.find(o=>o.name===e),a=s==null?void 0:s.type,l=r[e];return a&&!n.includes(a)?Ih(a,l):ul(l)},Ih=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return S0(t,r)}switch(e){case q.bool:return _0(t);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return N0(t);case q.json:case q.jsonb:return k0(t);case q.timestamp:return C0(t);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return ul(t);default:return ul(t)}},ul=e=>e,_0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},N0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},k0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},S0=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>Ih(t,o))}return e},C0=e=>typeof e=="string"?e.replace(" ","T"):e,Dh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class oa{constructor(t,r,n={},s=Oh){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Mc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Mc||(Mc={}));class Sn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sn.syncState(this.state,s,a,l),this.pendingDiffs.forEach(c=>{this.state=Sn.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Sn.syncDiff(this.state,s,a,l),o())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(a,(u,d)=>{l[u]||(c[u]=d)}),this.map(l,(u,d)=>{const h=a[u];if(h){const m=d.map(b=>b.presence_ref),x=h.map(b=>b.presence_ref),v=d.filter(b=>x.indexOf(b.presence_ref)<0),w=h.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(o[u]=v),w.length>0&&(c[u]=w)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const h=t[o].map(x=>x.presence_ref),m=d.filter(x=>h.indexOf(x.presence_ref)<0);t[o].unshift(...m)}n(o,d,c)}),this.map(l,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[o]=u,s(o,u,c),u.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Uc||(Uc={}));var zc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zc||(zc={}));var st;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(st||(st={}));class xo{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new oa(this,We.join,this.params,this.timeout),this.rejoinTimer=new $h(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(We.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Sn(this),this.broadcastEndpointURL=Dh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:l,private:o}}=this.params;this._onError(d=>t==null?void 0:t(st.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(st.CLOSED));const c={},u={broadcast:a,presence:l,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(st.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,x=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,v=[];for(let w=0;w<x;w++){const b=m[w],{filter:{event:g,schema:f,table:p,filter:j}}=b,_=d&&d[w];if(_&&_.event===g&&_.schema===f&&_.table===p&&_.filter===j)v.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=pe.errored,t==null||t(st.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(st.SUBSCRIBED);return}}).receive("error",d=>{this.state=pe.errored,t==null||t(st.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(st.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(We.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new oa(this,We.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new oa(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=We;if(n&&[o,c,u,d].indexOf(l)>=0&&n!==this._joinRef())return;let m=this._onMessage(l,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var v,w,b;return((v=x.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(w=x.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(x=>x.callback(m,n)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var v,w,b,g,f,p;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const j=x.id,_=(v=x.filter)===null||v===void 0?void 0:v.event;return j&&((w=r.ids)===null||w===void 0?void 0:w.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(f=(g=x==null?void 0:x.filter)===null||g===void 0?void 0:g.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return j==="*"||j===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:w,table:b,commit_timestamp:g,type:f,errors:p}=v;m=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:g,eventType:f,new:{},old:{},errors:p}),this._getPayloadRecords(v))}x.callback(m,n)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&xo.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(We.close,{},t)}_onError(t){this._on(We.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Dc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Dc(t.columns,t.old_record)),r}}const Fc=()=>{},E0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class P0{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=y0,this.params={},this.timeout=Oh,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fc,this.ref=0,this.logger=Fc,this.conn=null,this.sendBuffer=[],this.serializer=new j0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...o)=>Zn(async()=>{const{default:c}=await Promise.resolve().then(()=>Xr);return{default:c}},void 0).then(({default:c})=>c(...o)):l=fetch,(...o)=>l(...o)},this.endPoint=`${t}/${cl.websocket}`,this.httpEndpoint=Dh(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,l)=>l(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new $h(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=g0),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new R0(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:v0}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ur.connecting:return Jt.Connecting;case Ur.open:return Jt.Open;case Ur.closing:return Jt.Closing;default:return Jt.Closed}}isConnected(){return this.connectionState()===Jt.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new xo(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(We.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(w0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:a,ref:l}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${l&&"("+l+")"||""}`,a),Array.from(this.channels).filter(o=>o._isMember(n)).forEach(o=>o._trigger(s,a,l)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(We.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([E0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class R0{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ur.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class yo extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function re(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class T0 extends yo{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class dl extends yo{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var A0=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Mh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Zn(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},L0=()=>A0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Zn(()=>Promise.resolve().then(()=>Xr),void 0)).Response:Response}),hl=e=>{if(Array.isArray(e))return e.map(r=>hl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=hl(n)}),t};var fr=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const ca=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),O0=(e,t,r)=>fr(void 0,void 0,void 0,function*(){const n=yield L0();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new T0(ca(s),e.status||500))}).catch(s=>{t(new dl(ca(s),s))}):t(new dl(ca(e),e))}),$0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function ts(e,t,r,n,s,a){return fr(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,$0(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>O0(c,o,n))})})}function ci(e,t,r,n){return fr(this,void 0,void 0,function*(){return ts(e,"GET",t,r,n)})}function jt(e,t,r,n,s){return fr(this,void 0,void 0,function*(){return ts(e,"POST",t,n,s,r)})}function I0(e,t,r,n,s){return fr(this,void 0,void 0,function*(){return ts(e,"PUT",t,n,s,r)})}function D0(e,t,r,n){return fr(this,void 0,void 0,function*(){return ts(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Uh(e,t,r,n,s){return fr(this,void 0,void 0,function*(){return ts(e,"DELETE",t,n,s,r)})}var we=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const M0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class U0{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Mh(s)}uploadOrUpdate(t,r,n,s){return we(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},qc),s);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:a,headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(re(a))return{data:null,error:a};throw a}})}upload(t,r,n){return we(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return we(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:qc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(re(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return we(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield jt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new yo("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}})}update(t,r,n){return we(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return we(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}copy(t,r,n){return we(this,void 0,void 0,function*(){try{return{data:{path:(yield jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return we(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield jt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return we(this,void 0,void 0,function*(){try{const s=yield jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}download(t,r){return we(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield ci(this.fetch,`${this.url}/${s}/${o}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}})}info(t){return we(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ci(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:hl(n),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}})}exists(t){return we(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield D0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(re(n)&&n instanceof dl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(t){return we(this,void 0,void 0,function*(){try{return{data:yield Uh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}list(t,r,n){return we(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},M0),r),{prefix:t||""});return{data:yield jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(re(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const z0="2.7.1",F0={"X-Client-Info":`storage-js/${z0}`};var gr=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class q0{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},F0),r),this.fetch=Mh(n)}listBuckets(){return gr(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(re(t))return{data:null,error:t};throw t}})}getBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return gr(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return gr(this,void 0,void 0,function*(){try{return{data:yield I0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}})}emptyBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}deleteBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield Uh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}})}}class B0 extends q0{constructor(t,r={},n){super(t,r,n)}from(t){return new U0(this.url,this.headers,t,this.fetch)}}const K0="2.50.0";let gn="";typeof Deno<"u"?gn="deno":typeof document<"u"?gn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gn="react-native":gn="node";const H0={"X-Client-Info":`supabase-js-${gn}/${K0}`},W0={headers:H0},V0={schema:"public"},Q0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},G0={};var J0=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};const Y0=e=>{let t;return e?t=e:typeof fetch>"u"?t=_h:t=fetch,(...r)=>t(...r)},X0=()=>typeof Headers>"u"?Nh:Headers,Z0=(e,t,r)=>{const n=Y0(r),s=X0();return(a,l)=>J0(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let u=new s(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},l),{headers:u}))})};var eg=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};function tg(e){return e.endsWith("/")?e:e+"/"}function rg(e,t){var r,n;const{db:s,auth:a,realtime:l,global:o}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),l),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>eg(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const zh="2.70.0",wr=30*1e3,fl=3,ua=fl*wr,ng="http://localhost:9999",sg="supabase.auth.token",ig={"X-Client-Info":`gotrue-js/${zh}`},ml="X-Supabase-Api-Version",Fh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ag=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lg=6e5;class vo extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function O(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class og extends vo{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cg(e){return O(e)&&e.name==="AuthApiError"}class qh extends vo{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Bt extends vo{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class yt extends Bt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ug(e){return O(e)&&e.name==="AuthSessionMissingError"}class js extends Bt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bs extends Bt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class _s extends Bt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dg(e){return O(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bc extends Bt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pl extends Bt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function da(e){return O(e)&&e.name==="AuthRetryableFetchError"}class Kc extends Bt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Cn extends Bt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ui="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hc=` 	
\r=`.split(""),hg=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Hc.length;t+=1)e[Hc[t].charCodeAt(0)]=-2;for(let t=0;t<ui.length;t+=1)e[ui[t].charCodeAt(0)]=t;return e})();function Wc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ui[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ui[n]),t.queuedBits-=6}}function Bh(e,t,r){const n=hg[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Vc(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{pg(l,n,r)};for(let l=0;l<e.length;l+=1)Bh(e.charCodeAt(l),s,a);return t.join("")}function fg(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function mg(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}fg(n,t)}}function pg(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function gg(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Bh(e.charCodeAt(s),r,n);return new Uint8Array(t)}function xg(e){const t=[];return mg(e,r=>t.push(r)),new Uint8Array(t)}function yg(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Wc(s,r,n)),Wc(null,r,n),t.join("")}function vg(e){return Math.round(Date.now()/1e3)+e}function wg(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Be=()=>typeof window<"u"&&typeof document<"u",Wt={tested:!1,writable:!1},En=()=>{if(!Be())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wt.tested)return Wt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wt.tested=!0,Wt.writable=!0}catch{Wt.tested=!0,Wt.writable=!1}return Wt.writable};function jg(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Kh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Zn(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},bg=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Hh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ns=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ks=async(e,t)=>{await e.removeItem(t)};class $i{constructor(){this.promise=new $i.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}$i.promiseConstructor=Promise;function ha(e){const t=e.split(".");if(t.length!==3)throw new Cn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!ag.test(t[n]))throw new Cn("JWT not in base64url format");return{header:JSON.parse(Vc(t[0])),payload:JSON.parse(Vc(t[1])),signature:gg(t[2]),raw:{header:t[0],payload:t[1]}}}async function _g(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Ng(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function kg(e){return("0"+e.toString(16)).substr(-2)}function Sg(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,kg).join("")}async function Cg(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Eg(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Cg(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xr(e,t,r=!1){const n=Sg();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Hh(e,`${t}-code-verifier`,s);const a=await Eg(n);return[a,n===a?"plain":"s256"]}const Pg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rg(e){const t=e.headers.get(ml);if(!t||!t.match(Pg))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Tg(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Ag(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yr(e){if(!Lg.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Og=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Gt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$g=[502,503,504];async function Qc(e){var t;if(!bg(e))throw new pl(Gt(e),0);if($g.includes(e.status))throw new pl(Gt(e),e.status);let r;try{r=await e.json()}catch(a){throw new qh(Gt(a),a)}let n;const s=Rg(e);if(s&&s.getTime()>=Fh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Kc(Gt(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new yt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new Kc(Gt(r),e.status,r.weak_password.reasons);throw new og(Gt(r),e.status||500,n)}const Ig=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function I(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[ml]||(a[ml]=Fh["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Dg(e,t,r+o,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Dg(e,t,r,n,s,a){const l=Ig(t,n,s,a);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new pl(Gt(c),0)}if(o.ok||await Qc(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await Qc(c)}}function rt(e){var t;let r=null;Fg(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=vg(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Gc(e){const t=rt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Nt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Mg(e){return{data:e,error:null}}function Ug(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,l=Og(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function zg(e){return e}function Fg(e){return e.access_token&&e.refresh_token&&e.expires_in}const fa=["global","local","others"];var qg=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Bg{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Kh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=fa[0]){if(fa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fa.join(", ")}`);try{return await I(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await I(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=qg(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await I(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ug,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(O(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await I(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Nt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await I(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:zg});if(d.error)throw d.error;const h=await d.json(),m=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(O(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){yr(t);try{return await I(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Nt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){yr(t);try{return await I(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Nt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){yr(t);try{return await I(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){yr(t.userId);try{const{data:r,error:n}=await I(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteFactor(t){yr(t.userId),yr(t.id);try{return{data:await I(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}}const Kg={getItem:e=>En()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{En()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{En()&&globalThis.localStorage.removeItem(e)}};function Jc(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Hg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vr={debug:!!(globalThis&&En()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Wh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Wg extends Wh{}async function Vg(e,t,r){vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),vr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Wg(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(vr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Hg();const Qg={url:ng,storageKey:sg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ig,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yc(e,t,r){return await r()}class Vn{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vn.nextInstanceID,Vn.nextInstanceID+=1,this.instanceID>0&&Be()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Qg),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Bg({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Kh(s.fetch),this.lock=s.lock||Yc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Be()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Vg:this.lock=Yc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:En()?this.storage=Kg:(this.memoryStorage={},this.storage=Jc(this.memoryStorage)):(this.memoryStorage={},this.storage=Jc(this.memoryStorage)),Be()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=jg(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Be()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),dg(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return O(r)?{error:r}:{error:new qh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:rt}),{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(O(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:d,password:h,options:m}=t;let x=null,v=null;this.flowType==="pkce"&&([x,v]=await xr(this.storage,this.storageKey)),a=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:v},xform:rt})}else if("phone"in t){const{phone:d,password:h,options:m}=t;a=await I(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:rt})}else throw new bs("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return{data:{user:null,session:null},error:o};const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(O(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:o}=t;r=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gc})}else if("phone"in t){const{phone:a,password:l,options:o}=t;r=await I(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gc})}else throw new bs("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new js}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(O(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,a,l,o,c,u,d,h,m,x;let v,w;if("message"in t)v=t.message,w=t.signature;else{const{chain:b,wallet:g,statement:f,options:p}=t;let j;if(Be())if(typeof g=="object")j=g;else{const y=window;if("solana"in y&&typeof y.solana=="object"&&("signIn"in y.solana&&typeof y.solana.signIn=="function"||"signMessage"in y.solana&&typeof y.solana.signMessage=="function"))j=y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=g}const _=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const y=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),f?{statement:f}:null));let N;if(Array.isArray(y)&&y[0]&&typeof y[0]=="object")N=y[0];else if(y&&typeof y=="object"&&"signedMessage"in y&&"signature"in y)N=y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)v=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),w=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...f?["",f,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const y=await j.signMessage(new TextEncoder().encode(v),"utf8");if(!y||!(y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=y}}try{const{data:b,error:g}=await I(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:yg(w)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:rt});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new js}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(O(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await Ns(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:l}=await I(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:rt});if(await ks(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new js}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(O(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:l}=t,o=await I(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rt}),{data:c,error:u}=o;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new js}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(O(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,l;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await xr(this.storage,this.storageKey));const{error:h}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await I(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new bs("You must provide either an email or phone number.")}catch(o){if(O(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await I(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:rt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(O(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await xr(this.storage,this.storageKey)),await I(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Mg})}catch(a){if(O(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new yt;const{error:s}=await I(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:l}=await I(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:l,error:o}=await I(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o}}throw new bs("You must provide either an email or phone number and a type")}catch(r){if(O(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ns(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<ua:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!l&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Nt}):await this._useSession(async r=>{var n,s,a;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yt}:await I(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Nt})})}catch(r){if(O(r))return ug(r)&&(await this._removeSession(),await ks(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new yt;const l=s.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await xr(this.storage,this.storageKey));const{data:u,error:d}=await I(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Nt});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yt;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:l}=ha(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(O(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new yt;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(O(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Be())throw new _s("No browser detected.");if(t.error||t.error_description||t.error_code)throw new _s(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _s("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bc("No code detected.");const{data:f,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=t;if(!a||!o||!l||!u)throw new _s("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let m=d+h;c&&(m=parseInt(c));const x=m-d;x*1e3<=wr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:w,error:b}=await this._getUser(a);if(b)throw b;const g={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:m,refresh_token:l,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(O(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ns(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(cg(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await ks(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=wg(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await xr(this.storage,this.storageKey,!0));try{return await I(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(O(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var l,o,c,u,d;const{data:h,error:m}=a;if(m)throw m;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await I(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Be()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(O(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)throw l;return await I(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Ng(async s=>(s>0&&await _g(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await I(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:rt})),(s,a)=>{const l=200*Math.pow(2,s);return a&&da(a)&&Date.now()+l-n<wr})}catch(n){if(this._debug(r,"error",n),O(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Be()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ns(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ua;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${ua}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),da(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $i;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new yt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(s,"error",a),O(a)){const l={session:null,error:a};return da(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Hh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ks(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Be()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/wr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wr}ms, refresh threshold is ${fl} ticks`),s<=fl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Wh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Be()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await xr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await I(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await I(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:l,error:o}=await I(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(r){if(O(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await I(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(O(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(l=>l.factor_type==="totp"&&l.status==="verified"),a=n.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ha(s.access_token);let o=null;l.aal&&(o=l.aal);let c=o;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=l.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n||(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+lg>Date.now()))return n;const{data:s,error:a}=await I(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new Cn("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(l=>l.kid===t),!n)throw new Cn("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:x,error:v}=await this.getSession();if(v||!x.session)return{data:null,error:v};n=x.session.access_token}const{header:s,payload:a,signature:l,raw:{header:o,payload:c}}=ha(n);if(Tg(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:a,header:s,signature:l},error:null}}const u=Ag(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,l,xg(`${o}.${c}`)))throw new Cn("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}}Vn.nextInstanceID=0;const Gg=Vn;class Jg extends Gg{constructor(t){super(t)}}var Yg=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(d){try{u(n.next(d))}catch(h){l(h)}}function c(d){try{u(n.throw(d))}catch(h){l(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})};class Xg{constructor(t,r,n){var s,a,l;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=tg(t),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:V0,realtime:G0,auth:Object.assign(Object.assign({},Q0),{storageKey:u}),global:W0},h=rg(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=Z0(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new p0(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Hp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new B0(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Yg(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:l,lock:o,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Jg({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:l,lock:o,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new P0(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zg=(e,t,r)=>new Xg(e,t,r),ex="your_supabase_project_url",tx="your_supabase_anon_key",te=Zg(ex,tx),rx=async e=>{const{data:t,error:r}=await te.from("customers").insert(e).select().single();return{data:t,error:r}},nx=async()=>{const{data:e,error:t}=await te.from("customers").select("*").order("created_at",{ascending:!1});return t?{data:e,error:t}:{data:e==null?void 0:e.map(n=>({...n,registrationDate:n.registration_date?new Date(n.registration_date):new Date,totalKiosks:n.total_kiosks||0,totalRevenue:n.total_revenue||0})),error:t}},sx=async e=>{const{data:t,error:r}=await te.from("kiosks").insert(e).select().single();return{data:t,error:r}},Vh=async(e,t)=>{const{data:r,error:n}=await te.from("kiosks").update(t).eq("id",e).select().single();return{data:r,error:n}},ix=async()=>{const{data:e,error:t}=await te.from("kiosks").select(`
      *,
      customers(*),
      payments(*),
      maintenance_requests(*),
      refill_requests(*)
    `);return{data:e,error:t}},ax=async e=>{const{data:t,error:r}=await te.from("payments").insert(e).select().single();return{data:t,error:r}},Qh=async()=>{const{data:e,error:t}=await te.from("payments").select(`
      *,
      kiosks(name, location, customer_id)
    `).order("created_at",{ascending:!1});return{data:e,error:t}},lx=async(e,t)=>{const{data:r,error:n}=await te.from("payments").update(t).eq("id",e).select().single();return{data:r,error:n}},ox=async e=>{const{data:t,error:r}=await te.from("maintenance_requests").insert(e).select().single();return{data:t,error:r}},cx=async(e,t)=>{const{data:r,error:n}=await te.from("maintenance_requests").update(t).eq("id",e).select().single();return{data:r,error:n}},ux=async e=>{let t=te.from("maintenance_requests").select(`
      *,
      kiosks(name, location),
      customers(name, email)
    `).order("created_at",{ascending:!1});e&&(t=t.eq("customer_id",e));const{data:r,error:n}=await t;return{data:r,error:n}},ma=async(e,t)=>{const{data:r,error:n}=await te.from("refill_requests").update(t).eq("id",e).select().single();return{data:r,error:n}},kt=async e=>{const{data:t,error:r}=await te.from("notifications").insert(e).select().single();return{data:t,error:r}},dx=async()=>{const{data:e,error:t}=await te.from("notifications").select("*").order("created_at",{ascending:!1});return{data:e,error:t}},Xc=async e=>{const{data:t,error:r}=await te.from("notifications").update({read:!0}).eq("id",e).select().single();return{data:t,error:r}},hx=async(e,t)=>({id:`order_${Date.now()}_${Math.random().toString(36).substring(2)}`,amount:e*100,currency:"INR",receipt:`receipt_${t}_${Date.now()}`}),fx=async e=>({verified:!0}),Zc=({userRole:e,currentUserId:t})=>{const[r,n]=T.useState([]),[s,a]=T.useState([]),[l,o]=T.useState(null),[c,u]=T.useState(!1),[d,h]=T.useState(!0),[m,x]=T.useState({payment_id:"",reason:"",refund_type:"full",partial_amount:""}),[v,w]=T.useState({status:"approved",notes:"",refund_amount:""});T.useEffect(()=>{b()},[e,t]);const b=async()=>{h(!0);try{const{data:y}=await Qh();a(y||[]),n([])}catch(y){console.error("Error fetching data:",y)}finally{h(!1)}},g=async y=>{y.preventDefault();try{const N=s.find(L=>L.id===m.payment_id);if(!N)return;const E=m.refund_type==="full"?N.amount:parseFloat(m.partial_amount);await kt({type:"refund",kiosk_id:N.kiosk_id,customer_id:t,message:`Refund request: ${E} for payment ${N.razorpay_payment_id.substring(0,15)}...`,priority:"medium"});const M={id:`ticket_${Date.now()}`,payment_id:m.payment_id,customer_id:t,kiosk_id:N.kiosk_id,amount:E,reason:m.reason,status:"pending",created_at:new Date().toISOString(),payment:N};n(L=>[M,...L]),u(!1),x({payment_id:"",reason:"",refund_type:"full",partial_amount:""}),alert("Refund ticket created successfully!")}catch(N){console.error("Error creating refund ticket:",N),alert("Failed to create refund ticket")}},f=async y=>{var N;try{if(v.status==="approved"){const M=parseFloat(v.refund_amount)||y.amount;await lx(y.payment_id,{refund_amount:M,refund_reason:y.reason,status:M===((N=y.payment)==null?void 0:N.amount)?"refunded":"partial_refund"}),await kt({type:"refund",kiosk_id:y.kiosk_id,customer_id:y.customer_id,message:`Refund processed: ${M} has been refunded to your account`,priority:"high"})}const E=r.map(M=>M.id===y.id?{...M,status:v.status,admin_notes:v.notes}:M);n(E),o(null),w({status:"approved",notes:"",refund_amount:""}),alert(`Refund ticket ${v.status} successfully!`)}catch(E){console.error("Error processing admin action:",E),alert("Failed to process refund ticket")}},p=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"processed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},j=y=>{switch(y){case"pending":return Wn;case"approved":return mt;case"rejected":return Lp;case"processed":return mt;default:return xh}},_=e==="customer"?s.filter(y=>{var N;return((N=y.kiosks)==null?void 0:N.customer_id)===t&&y.status==="completed"}):s.filter(y=>y.status==="completed");return d?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e==="admin"?"Refund Ticket Management":"My Refund Requests"}),i.jsx("p",{className:"text-gray-600",children:e==="admin"?"Review and process customer refund requests":"Submit and track your refund requests"})]}),e==="customer"&&i.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Refund Request"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(y=>y.status==="pending").length})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Approved"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(y=>y.status==="approved").length})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Rejected"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.filter(y=>y.status==="rejected").length})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",r.reduce((y,N)=>y+N.amount,0).toLocaleString()]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Refund Tickets"}),i.jsx("div",{className:"space-y-4",children:r.map(y=>{var E,M,L,ce;const N=j(y.status);return i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx(N,{className:"w-5 h-5 text-gray-600"}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Refund Request #",y.id.substring(0,8)]}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Payment: ",(M=(E=y.payment)==null?void 0:E.razorpay_payment_id)==null?void 0:M.substring(0,15),"..."]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mb-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600",children:"Amount"}),i.jsxs("p",{className:"font-medium",children:["",y.amount]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600",children:"Reason"}),i.jsx("p",{className:"font-medium",children:y.reason})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600",children:"Created"}),i.jsx("p",{className:"font-medium",children:new Date(y.created_at).toLocaleDateString()})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600",children:"Kiosk"}),i.jsx("p",{className:"font-medium",children:((ce=(L=y.payment)==null?void 0:L.kiosks)==null?void 0:ce.name)||"Unknown"})]})]}),y.admin_notes&&i.jsxs("div",{className:"bg-gray-50 rounded p-2 mt-2",children:[i.jsx("p",{className:"text-xs text-gray-600",children:"Admin Notes:"}),i.jsx("p",{className:"text-sm text-gray-800",children:y.admin_notes})]})]}),i.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${p(y.status)}`,children:y.status.toUpperCase()}),e==="admin"&&y.status==="pending"&&i.jsx("button",{onClick:()=>o(y),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors",children:"Review"})]})]})},y.id)})}),r.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Pp,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-500",children:"No refund tickets found"})]})]}),c&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Refund Request"}),i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Payment"}),i.jsxs("select",{value:m.payment_id,onChange:y=>x({...m,payment_id:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Select a payment"}),_.map(y=>i.jsxs("option",{value:y.id,children:["",y.amount," - ",y.razorpay_payment_id.substring(0,15),"... (",new Date(y.created_at).toLocaleDateString(),")"]},y.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Type"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"refundType",value:"full",checked:m.refund_type==="full",onChange:y=>x({...m,refund_type:"full"}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Full Refund"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"refundType",value:"partial",checked:m.refund_type==="partial",onChange:y=>x({...m,refund_type:"partial"}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Partial Refund"})]})]})]}),m.refund_type==="partial"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Amount"}),i.jsx("input",{type:"number",min:"1",step:"0.01",value:m.partial_amount,onChange:y=>x({...m,partial_amount:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter amount",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Refund"}),i.jsx("textarea",{value:m.reason,onChange:y=>x({...m,reason:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Explain why you need a refund",required:!0})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>u(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:!m.payment_id||!m.reason,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Submit Request"})]})]})]})}),l&&e==="admin"&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review Refund Request"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Request Details"}),i.jsxs("p",{className:"font-medium",children:["Amount: ",l.amount]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Reason: ",l.reason]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Action"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"adminAction",value:"approved",checked:v.status==="approved",onChange:y=>w({...v,status:"approved"}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Approve Refund"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"adminAction",value:"rejected",checked:v.status==="rejected",onChange:y=>w({...v,status:"rejected"}),className:"mr-2"}),i.jsx("span",{className:"text-sm",children:"Reject Refund"})]})]})]}),v.status==="approved"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refund Amount ()"}),i.jsx("input",{type:"number",min:"1",max:l.amount,step:"0.01",value:v.refund_amount,onChange:y=>w({...v,refund_amount:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Max: ${l.amount}`})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Notes"}),i.jsx("textarea",{value:v.notes,onChange:y=>w({...v,notes:y.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Add notes for the customer"})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{onClick:()=>o(null),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:()=>f(l),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:v.status==="approved"?"Approve & Process":"Reject Request"})]})]})]})})]})},mx=({notifications:e,kiosks:t,onMarkAsRead:r,onMarkAllAsRead:n})=>{const s=o=>{switch(o){case"refill":return It;case"payment":return Vr;case"maintenance":return cr;case"error":return It;default:return or}},a=o=>{switch(o){case"refill":return"text-red-600 bg-red-100";case"payment":return"text-green-600 bg-green-100";case"maintenance":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-blue-600 bg-blue-100"}},l=e.filter(o=>!o.read).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Notifications"}),i.jsx("p",{className:"text-gray-600",children:"Stay updated with kiosk alerts and system updates"})]}),l>0&&i.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Mark All as Read"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Notifications"}),i.jsxs("span",{className:"text-sm text-gray-500",children:[l," unread of ",e.length," total"]})]})}),i.jsx("div",{className:"divide-y divide-gray-100",children:e.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(mt,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500",children:"No notifications at this time"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"You're all caught up!"})]}):e.map(o=>{var h;const c=t.find(m=>m.id===o.kioskId),u=s(o.type),d=a(o.type);return i.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${o.read?"":"bg-blue-50 border-l-4 border-l-blue-500"}`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${d}`,children:i.jsx(u,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:`text-sm ${o.read?"text-gray-700":"font-semibold text-gray-900"}`,children:o.message}),!o.read&&i.jsx("button",{onClick:()=>r(o.id),className:"text-blue-600 hover:text-blue-800 text-xs font-medium",children:"Mark as read"})]}),i.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[i.jsx("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:i.jsx("span",{children:(c==null?void 0:c.name)||"Unknown Kiosk"})}),i.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[i.jsx(Wn,{className:"w-3 h-3"}),i.jsx("span",{children:o.timestamp.toLocaleString()})]})]}),o.type==="refill"&&c&&i.jsx("div",{className:"mt-2 p-2 bg-red-50 rounded-lg",children:i.jsxs("p",{className:"text-xs text-red-700",children:["Action Required: Refill liquid tank (Current level: ",c.liquidLevel??0,"%)"]})}),o.type==="maintenance"&&c&&i.jsx("div",{className:"mt-2 p-2 bg-yellow-50 rounded-lg",children:i.jsxs("p",{className:"text-xs text-yellow-700",children:["Maintenance needed: Last service ",((h=c.lastMaintenance)==null?void 0:h.toLocaleDateString())??"N/A"]})})]})]})},o.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(It,{className:"w-6 h-6 text-red-600 mb-2"}),i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Schedule Refill"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Mark kiosks for liquid refill"})]}),i.jsxs("button",{className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(cr,{className:"w-6 h-6 text-yellow-600 mb-2"}),i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Schedule Maintenance"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Plan maintenance activities"})]}),i.jsxs("button",{className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(or,{className:"w-6 h-6 text-blue-600 mb-2"}),i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Notification Settings"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Configure alert preferences"})]})]})]})]})},px=({onAddKiosk:e,customers:t})=>{const[r,n]=T.useState({name:"",location:"",qrCode:"",status:"active",customerId:"",pricePerCleaning:50}),[s,a]=T.useState(!1),l=()=>Math.random().toString(36).substring(2)+Date.now().toString(36),o=async d=>{d.preventDefault(),a(!0);try{const h={...r,totalPayments:0,liquidLevel:100,needsRefill:!1,lastMaintenance:new Date,totalRevenue:0,ownerRevenue:0,platformRevenue:0,payments:[],maintenanceRequests:[]};e(h),n({name:"",location:"",qrCode:"",status:"active",customerId:"",pricePerCleaning:50})}catch(h){console.error("Error adding kiosk:",h)}finally{a(!1)}},c=()=>{const d=`QR_${r.name.toUpperCase().replace(/\s+/g,"_")}_${l().toUpperCase()}`;n({...r,qrCode:d})},u=t.filter(d=>d.status==="active");return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add New Kiosk"}),i.jsx("p",{className:"text-gray-600",children:"Set up a new helmet cleaning kiosk and assign to a customer"})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:i.jsxs("form",{onSubmit:o,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kiosk Name *"}),i.jsx("input",{type:"text",value:r.name,onChange:d=>n({...r,name:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Mall Central Kiosk",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Customer *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ei,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsxs("select",{value:r.customerId,onChange:d=>n({...r,customerId:d.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[i.jsx("option",{value:"",children:"Select a customer"}),u.map(d=>i.jsxs("option",{value:d.id,children:[d.name," (",d.email,")"]},d.id))]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per Cleaning *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"number",min:"10",max:"500",value:r.pricePerCleaning,onChange:d=>n({...r,pricePerCleaning:parseInt(d.target.value)}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"50",required:!0})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Revenue split: Customer gets 90%, Platform gets 10%"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),i.jsxs("select",{value:r.status,onChange:d=>n({...r,status:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"}),i.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),i.jsxs("div",{className:"relative",children:[i.jsx(fo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",value:r.location,onChange:d=>n({...r,location:d.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Phoenix Mall, Bangalore - Ground Floor",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"QR Code Identifier *"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(oi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",value:r.qrCode,onChange:d=>n({...r,qrCode:d.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"QR Code identifier for Razorpay",required:!0})]}),i.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Generate"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This identifier will be used to link Razorpay payments to this kiosk"})]}),r.customerId&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Revenue Sharing Details"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-green-800",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Customer Revenue (90%)"}),i.jsxs("p",{children:["",Math.round(r.pricePerCleaning*.9)," per cleaning"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Platform Fee (10%)"}),i.jsxs("p",{children:["",Math.round(r.pricePerCleaning*.1)," per cleaning"]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Setup Instructions"}),i.jsxs("ol",{className:"text-xs text-blue-800 space-y-1 list-decimal list-inside",children:[i.jsx("li",{children:"Create a QR code in your Razorpay dashboard using the identifier above"}),i.jsxs("li",{children:["Set the amount to ",r.pricePerCleaning," (helmet cleaning fee)"]}),i.jsx("li",{children:"Configure the payment webhook to include the QR code identifier"}),i.jsx("li",{children:"Print and attach the QR code to the physical kiosk"}),i.jsx("li",{children:"Customer will receive 90% of revenue, platform keeps 10%"})]})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>n({name:"",location:"",qrCode:"",status:"active",customerId:"",pricePerCleaning:50}),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Reset Form"}),i.jsx("button",{type:"submit",disabled:s||u.length===0,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i.jsx("span",{children:"Adding..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(jh,{className:"w-4 h-4"}),i.jsx("span",{children:"Add Kiosk"})]})})]}),u.length===0&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsx("p",{className:"text-sm text-yellow-800",children:"No active customers available. Please add a customer first before creating a kiosk."})})]})})]})},gx=({customers:e,kiosks:t,onCustomerUpdate:r,onCustomerDelete:n})=>{const[s,a]=T.useState(null),[l,o]=T.useState(""),c=e.filter(h=>h.name.toLowerCase().includes(l.toLowerCase())||h.email.toLowerCase().includes(l.toLowerCase())),u=h=>t.filter(m=>m.customerId===h),d=h=>{switch(h){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Customer Management"}),i.jsx("p",{className:"text-gray-600",children:"Manage kiosk owners and their accounts"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Customers"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsx("input",{type:"text",placeholder:"Search customers by name or email...",value:l,onChange:h=>o(h.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(h=>{const x=u(h.id).filter(v=>v.status==="active").length;return i.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(mo,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.name}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d(h.status)}`,children:h.status.toUpperCase()})]})]}),i.jsx("button",{onClick:()=>a(h),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(ho,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[i.jsx(yh,{className:"w-4 h-4"}),i.jsx("span",{children:h.email})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[i.jsx(vh,{className:"w-4 h-4"}),i.jsx("span",{children:h.phone})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[i.jsx(uo,{className:"w-4 h-4"}),i.jsxs("span",{children:["Joined ",h.registrationDate.toLocaleDateString()]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Kiosks"}),i.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[x,"/",h.totalKiosks]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Revenue"}),i.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["",h.totalRevenue.toLocaleString()]})]})]}),i.jsxs("div",{className:"flex space-x-2 mt-4",children:[i.jsx("button",{onClick:()=>{const v={...h,status:h.status==="active"?"inactive":"active"};r(v)},className:"flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:h.status==="active"?"Deactivate":"Activate"}),i.jsx("button",{onClick:()=>a(h),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:i.jsx(Tp,{className:"w-4 h-4"})})]})]},h.id)})})]}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Customer Details"}),i.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Name"}),i.jsx("p",{className:"text-sm text-gray-900",children:s.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),i.jsx("p",{className:"text-sm text-gray-900",children:s.email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Phone"}),i.jsx("p",{className:"text-sm text-gray-900",children:s.phone})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),i.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${d(s.status)}`,children:s.status.toUpperCase()})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Registration Date"}),i.jsx("p",{className:"text-sm text-gray-900",children:s.registrationDate.toLocaleDateString()})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Kiosks"}),i.jsx("p",{className:"text-sm text-gray-900",children:s.totalKiosks})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Total Revenue (90%)"}),i.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["",s.totalRevenue.toLocaleString()]})]})]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Customer's Kiosks"}),i.jsx("div",{className:"space-y-2",children:u(s.id).map(h=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:h.name}),i.jsx("p",{className:"text-xs text-gray-500",children:h.location})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["",h.pricePerCleaning,"/clean"]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.status==="active"?"bg-green-100 text-green-800":h.status==="maintenance"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:h.status.toUpperCase()})]})]},h.id))})]}),i.jsxs("div",{className:"flex space-x-3 mt-6 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>a(null),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"}),i.jsx("button",{onClick:()=>{const h={...s,status:s.status==="active"?"suspended":"active"};r(h),a(h)},className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:s.status==="active"?"Suspend":"Activate"})]})]})})]})},xx=({onAddCustomer:e})=>{const[t,r]=T.useState({name:"",email:"",phone:"",status:"active"}),[n,s]=T.useState(!1),a=async l=>{l.preventDefault(),s(!0);try{const o={...t,registrationDate:new Date,totalKiosks:0,totalRevenue:0};e(o),r({name:"",email:"",phone:"",status:"active"})}catch(o){console.error("Error adding customer:",o)}finally{s(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Add New Customer"}),i.jsx("p",{className:"text-gray-600",children:"Register a new kiosk owner to your network"})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:i.jsxs("form",{onSubmit:a,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ei,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",value:t.name,onChange:l=>r({...t,name:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Rajesh Kumar",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),i.jsxs("select",{value:t.status,onChange:l=>r({...t,status:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"active",children:"Active"}),i.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),i.jsxs("div",{className:"relative",children:[i.jsx(yh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"email",value:t.email,onChange:l=>r({...t,email:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., rajesh.kumar@email.com",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),i.jsxs("div",{className:"relative",children:[i.jsx(vh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"tel",value:t.phone,onChange:l=>r({...t,phone:l.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., +91-9876543210",required:!0})]})]}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Customer Onboarding"}),i.jsxs("ol",{className:"text-xs text-blue-800 space-y-1 list-decimal list-inside",children:[i.jsx("li",{children:"Customer account will be created with provided details"}),i.jsx("li",{children:"Customer will receive login credentials via email"}),i.jsx("li",{children:"They can access their dedicated dashboard to manage kiosks"}),i.jsx("li",{children:"Revenue sharing: 90% to customer, 10% platform fee"}),i.jsx("li",{children:"Customer can request maintenance and support through the portal"})]})]}),i.jsxs("div",{className:"flex space-x-4 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>r({name:"",email:"",phone:"",status:"active"}),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Reset Form"}),i.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:n?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),i.jsx("span",{children:"Adding..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(jh,{className:"w-4 h-4"}),i.jsx("span",{children:"Add Customer"})]})})]})]})}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Sharing Model"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Customer Revenue (90%)"}),i.jsxs("ul",{className:"text-xs text-green-800 space-y-1",children:[i.jsx("li",{children:" Customer receives 90% of each transaction"}),i.jsx("li",{children:" Direct deposit to their registered account"}),i.jsx("li",{children:" Real-time revenue tracking in their dashboard"}),i.jsx("li",{children:" Monthly detailed revenue reports"})]})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Platform Fee (10%)"}),i.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[i.jsx("li",{children:" 10% platform fee for payment processing"}),i.jsx("li",{children:" Includes maintenance and support services"}),i.jsx("li",{children:" 24/7 technical support and monitoring"}),i.jsx("li",{children:" Regular software updates and features"})]})]})]})]})]})},eu=({maintenanceRequests:e,kiosks:t,customers:r,onUpdateRequest:n})=>{const[s,a]=T.useState(null),[l,o]=T.useState("all"),[c,u]=T.useState("all"),d=e.filter(b=>{const g=l==="all"||b.status===l,f=c==="all"||b.priority===c;return g&&f}),h=b=>{var g;return((g=t.find(f=>f.id===b))==null?void 0:g.name)||"Unknown Kiosk"},m=b=>{var g;return((g=r.find(f=>f.id===b))==null?void 0:g.name)||"Unknown Customer"},x=b=>{switch(b){case"urgent":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},v=b=>{switch(b){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=b=>{switch(b){case"refill":return"";case"repair":return"";case"cleaning":return"";default:return""}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Maintenance Management"}),i.jsx("p",{className:"text-gray-600",children:"Track and manage maintenance requests from customers"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),i.jsx("p",{className:"text-xl font-bold text-yellow-600",children:e.filter(b=>b.status==="pending").length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"}),i.jsx("p",{className:"text-xl font-bold text-blue-600",children:e.filter(b=>b.status==="in_progress").length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),i.jsx("p",{className:"text-xl font-bold text-green-600",children:e.filter(b=>b.status==="completed").length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Urgent"}),i.jsx("p",{className:"text-xl font-bold text-red-600",children:e.filter(b=>b.priority==="urgent").length})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[i.jsxs("select",{value:l,onChange:b=>o(b.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"in_progress",children:"In Progress"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]}),i.jsxs("select",{value:c,onChange:b=>u(b.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"all",children:"All Priority"}),i.jsx("option",{value:"urgent",children:"Urgent"}),i.jsx("option",{value:"high",children:"High"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"low",children:"Low"})]})]}),i.jsx("div",{className:"space-y-4",children:d.map(b=>i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:w(b.type)}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[b.type.charAt(0).toUpperCase()+b.type.slice(1)," Request"]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[h(b.kioskId),"  ",m(b.customerId)]})]})]}),i.jsx("p",{className:"text-sm text-gray-700 mb-3",children:b.description}),i.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(uo,{className:"w-3 h-3"}),i.jsx("span",{children:b.requestDate.toLocaleDateString()})]}),b.assignedTechnician&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Ei,{className:"w-3 h-3"}),i.jsx("span",{children:b.assignedTechnician})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${x(b.priority)}`,children:b.priority.toUpperCase()}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(b.status)}`,children:b.status.replace("_"," ").toUpperCase()}),i.jsx("button",{onClick:()=>a(b),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors",children:"Manage"})]})]})},b.id))}),d.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(mt,{className:"w-12 h-12 text-green-500 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-500",children:"No maintenance requests found"})]})]}),s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Manage Request"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),i.jsxs("select",{value:s.status,onChange:b=>a({...s,status:b.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"in_progress",children:"In Progress"}),i.jsx("option",{value:"completed",children:"Completed"}),i.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assigned Technician"}),i.jsx("input",{type:"text",value:s.assignedTechnician||"",onChange:b=>a({...s,assignedTechnician:b.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter technician ID or name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Cost ()"}),i.jsx("input",{type:"number",value:s.cost||"",onChange:b=>a({...s,cost:parseFloat(b.target.value)}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter service cost"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),i.jsx("textarea",{value:s.notes||"",onChange:b=>a({...s,notes:b.target.value}),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Add notes about the service"})]})]}),i.jsxs("div",{className:"flex space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>a(null),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:()=>{const b={...s,completedDate:s.status==="completed"?new Date:s.completedDate};n(b),a(null)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Update Request"})]})]})})]})},yx=({kiosks:e,customers:t})=>{const r=e.reduce((u,d)=>u+(d.totalRevenue??0),0),n=e.reduce((u,d)=>u+(d.platformRevenue??0),0),s=e.reduce((u,d)=>u+(d.ownerRevenue??0),0),a=e.reduce((u,d)=>u+(d.totalPayments??0),0),l=a>0?r/a:0,o=[...e].sort((u,d)=>(d.totalRevenue??0)-(u.totalRevenue??0)).slice(0,5),c=[...t].sort((u,d)=>(d.totalRevenue??0)-(u.totalRevenue??0)).slice(0,5);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Revenue Analytics"}),i.jsx("p",{className:"text-gray-600",children:"Track platform revenue and customer earnings"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(fe,{title:"Total Revenue",value:`${r.toLocaleString()}`,change:"+15.3% from last month",changeType:"positive",icon:ur,iconColor:"bg-green-500"}),i.jsx(fe,{title:"Platform Revenue (10%)",value:`${n.toLocaleString()}`,change:"+12.8% from last month",changeType:"positive",icon:Ci,iconColor:"bg-blue-500"}),i.jsx(fe,{title:"Customer Revenue (90%)",value:`${s.toLocaleString()}`,change:"+15.7% from last month",changeType:"positive",icon:mo,iconColor:"bg-purple-500"}),i.jsx(fe,{title:"Avg. Transaction",value:`${l.toFixed(0)}`,change:`${a} total payments`,changeType:"neutral",icon:ct,iconColor:"bg-orange-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Kiosks"}),i.jsx("div",{className:"space-y-4",children:o.map((u,d)=>{const h=t.find(m=>m.id===u.customerId);return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["#",d+1]})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.name}),i.jsx("p",{className:"text-xs text-gray-500",children:h==null?void 0:h.name})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["",(u.totalRevenue??0).toLocaleString()]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[u.totalPayments??0," payments"]})]})]},u.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Earning Customers"}),i.jsx("div",{className:"space-y-4",children:c.map((u,d)=>{const m=e.filter(x=>x.customerId===u.id).filter(x=>x.status==="active").length;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-bold text-green-600",children:["#",d+1]})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[m," active kiosks"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["",(u.totalRevenue??0).toLocaleString()]}),i.jsx("p",{className:"text-xs text-gray-500",children:"90% share"})]})]},u.id)})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Breakdown by Kiosk"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Kiosk"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Owner"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Price/Clean"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Total Revenue"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Platform (10%)"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Customer (90%)"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Payments"})]})}),i.jsx("tbody",{children:e.map(u=>{const d=t.find(h=>h.id===u.customerId);return i.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.name}),i.jsx("p",{className:"text-xs text-gray-500",children:u.location})]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-900",children:d==null?void 0:d.name})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",u.pricePerCleaning??0]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["",(u.totalRevenue??0).toLocaleString()]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["",(u.platformRevenue??0).toLocaleString()]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm font-medium text-green-600",children:["",(u.ownerRevenue??0).toLocaleString()]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-900",children:u.totalPayments??0})})]},u.id)})})]})})]})]})},tu=({customer:e,kiosks:t,notifications:r})=>{const n=t.filter(u=>u.customerId===e.id),s=n.filter(u=>u.status==="active").length,a=n.reduce((u,d)=>u+(d.ownerRevenue??0),0),l=n.reduce((u,d)=>u+(d.totalPayments??0),0),o=n.filter(u=>u.needsRefill).length,c=r.filter(u=>u.customerId===e.id).slice(0,5);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Welcome back, ",e.name,"!"]}),i.jsx("p",{className:"text-gray-600",children:"Monitor your kiosk network performance and earnings"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(fe,{title:"Your Revenue (90%)",value:`${a.toLocaleString()}`,change:"+15.2% from last month",changeType:"positive",icon:ur,iconColor:"bg-green-500"}),i.jsx(fe,{title:"Total Payments",value:l.toLocaleString(),change:"+8.7% from last month",changeType:"positive",icon:ct,iconColor:"bg-blue-500"}),i.jsx(fe,{title:"Active Kiosks",value:s,change:`${n.length} total kiosks`,changeType:"neutral",icon:ct,iconColor:"bg-purple-500"}),i.jsx(fe,{title:"Refill Alerts",value:o,change:"Immediate attention needed",changeType:o>0?"negative":"positive",icon:It,iconColor:o>0?"bg-red-500":"bg-green-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Kiosks Performance"}),i.jsx("div",{className:"space-y-4",children:n.map(u=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${u.status==="active"?"bg-green-500":u.status==="maintenance"?"bg-red-500":"bg-gray-400"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:u.name}),i.jsx("p",{className:"text-xs text-gray-500",children:u.location})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-medium text-green-600",children:["",(u.ownerRevenue??0).toLocaleString()]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[u.totalPayments??0," payments"]}),u.needsRefill&&i.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[i.jsx(Ut,{className:"w-3 h-3 text-red-500"}),i.jsx("span",{className:"text-xs text-red-600",children:"Refill needed"})]})]})]},u.id))})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Notifications"}),i.jsxs("div",{className:"space-y-4",children:[c.map(u=>{const d=n.find(h=>h.id===u.kioskId);return i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${u.type==="refill"?"bg-red-500":u.type==="payment"?"bg-green-500":"bg-yellow-500"}`}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm text-gray-900",children:u.message}),i.jsxs("p",{className:"text-xs text-gray-500",children:[d==null?void 0:d.name,"  ",u.timestamp.toLocaleTimeString()]})]})]},u.id)}),c.length===0&&i.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No recent notifications"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(It,{className:"w-6 h-6 text-red-600 mb-2"}),i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Request Refill"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Submit liquid refill request"})]}),i.jsxs("button",{className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(ct,{className:"w-6 h-6 text-yellow-600 mb-2"}),i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Report Issue"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Report technical problems"})]}),i.jsxs("button",{className:"p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(ur,{className:"w-6 h-6 text-blue-600 mb-2"}),i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"View Analytics"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Detailed performance metrics"})]})]})]})]})},vx=({kiosks:e,onMaintenanceRequest:t})=>{const[r,n]=T.useState(null),[s,a]=T.useState(!1),[l,o]=T.useState("refill"),[c,u]=T.useState(""),[d,h]=T.useState("medium"),m=w=>{switch(w){case"active":return"bg-green-500";case"maintenance":return"bg-red-500";case"inactive":return"bg-gray-400";default:return"bg-gray-400"}},x=w=>w>50?"bg-green-500":w>25?"bg-yellow-500":"bg-red-500",v=w=>{if(w.preventDefault(),!r)return;const b={kioskId:r.id,customerId:r.customerId,type:l,priority:d,description:c,status:"pending",requestDate:new Date};t(b),a(!1),n(null),u(""),o("refill"),h("medium")};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"My Kiosks"}),i.jsx("p",{className:"text-gray-600",children:"Manage and monitor your helmet cleaning kiosks"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Kiosks"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(w=>i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${m(w.status)}`}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name})]}),i.jsx("button",{onClick:()=>n(w),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(cr,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[i.jsx(fo,{className:"w-4 h-4"}),i.jsx("span",{children:w.location})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Liquid Level"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-20 h-2 bg-gray-200 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full ${x(w.liquidLevel??0)} transition-all duration-300`,style:{width:`${w.liquidLevel??0}%`}})}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[w.liquidLevel??0,"%"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-gray-100",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Your Revenue"}),i.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["",(w.ownerRevenue??0).toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Payments"}),i.jsx("p",{className:"text-lg font-semibold text-gray-900",children:w.totalPayments??0})]})]}),w.needsRefill&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ut,{className:"w-4 h-4 text-red-600"}),i.jsx("span",{className:"text-sm font-medium text-red-700",children:"Refill Required"})]}),i.jsx("p",{className:"text-xs text-red-600 mt-1",children:(w.totalPayments??0)>=250?"Reached 250 payment limit":"Low liquid level"})]}),i.jsxs("div",{className:"flex space-x-2 pt-3",children:[i.jsx("button",{onClick:()=>{n(w),o("refill"),a(!0)},className:"flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm",children:"Request Refill"}),i.jsx("button",{onClick:()=>{n(w),o("repair"),a(!0)},className:"flex-1 px-3 py-2 bg-yellow-100 text-yellow-700 rounded-lg hover:bg-yellow-200 transition-colors text-sm",children:"Report Issue"})]})]})]},w.id))}),r&&!s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:r.name}),i.jsx("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Location"}),i.jsx("p",{className:"text-sm text-gray-900",children:r.location})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),i.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${r.status==="active"?"bg-green-100 text-green-800":r.status==="maintenance"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:r.status.toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Price per Clean"}),i.jsxs("p",{className:"text-sm text-gray-900",children:["",r.pricePerCleaning]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Your Revenue (90%)"}),i.jsxs("p",{className:"text-lg font-semibold text-green-600",children:["",(r.ownerRevenue??0).toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Platform Fee (10%)"}),i.jsxs("p",{className:"text-lg font-semibold text-blue-600",children:["",(r.platformRevenue??0).toLocaleString()]})]})]}),i.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Payments"}),i.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[r.payments.slice(0,5).map(w=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600",children:new Date(w.timestamp).toLocaleDateString()}),i.jsxs("span",{className:"font-medium text-gray-900",children:["",w.ownerRevenue]})]},w.id)),r.payments.length===0&&i.jsx("p",{className:"text-xs text-gray-500",children:"No recent payments"})]})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{onClick:()=>{o("refill"),a(!0)},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Request Service"}),i.jsx("button",{onClick:()=>n(null),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Close"})]})]})]})}),s&&r&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Request Maintenance"}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kiosk"}),i.jsxs("p",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded",children:[r.name," - ",r.location]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Type"}),i.jsxs("select",{value:l,onChange:w=>o(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"refill",children:"Liquid Refill"}),i.jsx("option",{value:"repair",children:"Technical Repair"}),i.jsx("option",{value:"cleaning",children:"Deep Cleaning"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),i.jsxs("select",{value:d,onChange:w=>h(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"low",children:"Low"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"high",children:"High"}),i.jsx("option",{value:"urgent",children:"Urgent"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{value:c,onChange:w=>u(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Describe the issue or service needed",required:!0})]}),i.jsxs("div",{className:"flex space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{a(!1),n(null)},className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Submit Request"})]})]})]})})]})},wx=({kiosks:e})=>{const t=e.reduce((o,c)=>o+(c.ownerRevenue??0),0),r=e.reduce((o,c)=>o+(c.totalPayments??0),0),n=e.length>0?t/e.length:0,s=r>0?t/r:0,a=[...e].sort((o,c)=>(c.ownerRevenue??0)-(o.ownerRevenue??0)),l=[{month:"Jan",revenue:Math.round(t*.6)},{month:"Feb",revenue:Math.round(t*.7)},{month:"Mar",revenue:Math.round(t*.8)},{month:"Apr",revenue:Math.round(t*.9)},{month:"May",revenue:t}];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Revenue Analytics"}),i.jsx("p",{className:"text-gray-600",children:"Track your earnings and kiosk performance"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(fe,{title:"Total Revenue (90%)",value:`${t.toLocaleString()}`,change:"+18.2% from last month",changeType:"positive",icon:ur,iconColor:"bg-green-500"}),i.jsx(fe,{title:"Total Payments",value:r.toLocaleString(),change:"+12.5% from last month",changeType:"positive",icon:ct,iconColor:"bg-blue-500"}),i.jsx(fe,{title:"Avg per Kiosk",value:`${n.toLocaleString()}`,change:`${e.length} active kiosks`,changeType:"neutral",icon:Ci,iconColor:"bg-purple-500"}),i.jsx(fe,{title:"Avg per Payment",value:`${s.toFixed(0)}`,change:"Your 90% share",changeType:"neutral",icon:uo,iconColor:"bg-orange-500"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Revenue Trend"}),i.jsx("div",{className:"space-y-4",children:l.map((o,c)=>{const u=Math.max(...l.map(h=>h.revenue)),d=o.revenue/u*100;return i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-12 text-sm text-gray-600",children:o.month}),i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-300",style:{width:`${d}%`}})})}),i.jsxs("div",{className:"w-20 text-sm font-medium text-gray-900 text-right",children:["",o.revenue.toLocaleString()]})]},o.month)})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Kiosk Performance"}),i.jsx("div",{className:"space-y-4",children:a.map((o,c)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-bold text-green-600",children:["#",c+1]})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:o.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[o.totalPayments??0," payments"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm font-semibold text-green-600",children:["",(o.ownerRevenue??0).toLocaleString()]}),i.jsxs("p",{className:"text-xs text-gray-500",children:["",o.pricePerCleaning??0,"/clean"]})]})]},o.id))})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Breakdown"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-gray-200",children:[i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Kiosk"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Location"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Price/Clean"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Payments"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Total Revenue"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Your Share (90%)"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Platform Fee (10%)"})]})}),i.jsx("tbody",{children:e.map(o=>i.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm font-medium text-gray-900",children:o.name})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-600",children:o.location})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["",o.pricePerCleaning??0]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:"text-sm text-gray-900",children:o.totalPayments??0})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["",(o.totalRevenue??0).toLocaleString()]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["",(o.ownerRevenue??0).toLocaleString()]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("span",{className:"text-sm text-blue-600",children:["",(o.platformRevenue??0).toLocaleString()]})})]},o.id))})]})})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-xl border border-green-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue Summary"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",t.toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Your Total Earnings (90%)"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",e.reduce((o,c)=>o+(c.platformRevenue??0),0).toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Platform Fees (10%)"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",e.reduce((o,c)=>o+(c.totalRevenue??0),0).toLocaleString()]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Total Generated Revenue"})]})]})]})]})},jx=({notifications:e,kiosks:t,onMarkAsRead:r,onMarkAllAsRead:n})=>{const s=c=>{switch(c){case"refill":return Ut;case"payment":return or;case"maintenance":return cr;case"error":return It;default:return or}},a=c=>{switch(c){case"refill":return"text-red-600 bg-red-100";case"payment":return"text-green-600 bg-green-100";case"maintenance":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-blue-600 bg-blue-100"}},l=c=>{switch(c){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-green-500 bg-green-50";default:return"border-l-blue-500 bg-blue-50"}},o=e.filter(c=>!c.read).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Notifications"}),i.jsx("p",{className:"text-gray-600",children:"Stay updated with your kiosk alerts and updates"})]}),o>0&&i.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Mark All as Read"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[i.jsx("div",{className:"p-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Notifications"}),i.jsxs("span",{className:"text-sm text-gray-500",children:[o," unread of ",e.length," total"]})]})}),i.jsx("div",{className:"divide-y divide-gray-100",children:e.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(mt,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500",children:"No notifications at this time"}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"You're all caught up!"})]}):e.map(c=>{const u=t.find(x=>x.id===c.kioskId),d=s(c.type),h=a(c.type),m=l(c.priority);return i.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${c.read?"":`border-l-4 ${m}`}`,children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${h}`,children:i.jsx(d,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("p",{className:`text-sm ${c.read?"text-gray-700":"font-semibold text-gray-900"}`,children:c.message}),!c.read&&i.jsx("button",{onClick:()=>r(c.id),className:"text-blue-600 hover:text-blue-800 text-xs font-medium ml-2",children:"Mark as read"})]}),i.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[i.jsx("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:i.jsx("span",{children:(u==null?void 0:u.name)||"System"})}),i.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500",children:[i.jsx(Wn,{className:"w-3 h-3"}),i.jsx("span",{children:c.timestamp.toLocaleString()})]}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c.priority==="high"?"bg-red-100 text-red-800":c.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:c.priority.toUpperCase()})]}),c.type==="refill"&&u&&i.jsxs("div",{className:"mt-2 p-2 bg-red-50 rounded-lg",children:[i.jsxs("p",{className:"text-xs text-red-700",children:[i.jsx("strong",{children:"Action Required:"})," Your kiosk needs liquid refill"]}),i.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Current level: ",u.liquidLevel,"% | Payments: ",u.totalPayments,"/250"]})]}),c.type==="maintenance"&&u&&i.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 rounded-lg",children:[i.jsxs("p",{className:"text-xs text-yellow-700",children:[i.jsx("strong",{children:"Service Update:"})," Maintenance status changed"]}),i.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["Last service: ",u.lastMaintenance.toLocaleDateString()]})]}),c.type==="payment"&&i.jsx("div",{className:"mt-2 p-2 bg-green-50 rounded-lg",children:i.jsxs("p",{className:"text-xs text-green-700",children:[i.jsx("strong",{children:"Revenue Update:"})," New payment received"]})})]})]})},c.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Refill Alerts"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Get notified when kiosks need liquid refill"})]}),i.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Payment Notifications"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Receive alerts for new payments"})]}),i.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Maintenance Updates"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Get updates on maintenance requests"})]}),i.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),i.jsx("p",{className:"text-xs text-gray-500",children:"Receive important alerts via email"})]}),i.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded"})]})]})]})]})},ru=({userRole:e,currentUserId:t})=>{var g;const[r,n]=T.useState([]),[s,a]=T.useState(null),[l,o]=T.useState(!0),[c,u]=T.useState(!1),[d,h]=T.useState({cost:"",notes:"",approved_amount:""});T.useEffect(()=>{m()},[e,t]);const m=async()=>{o(!0);try{let f=te.from("refill_requests").select(`
          *,
          kiosks (name, location, liquid_level, refill_limit),
          customers (name, email)
        `).order("request_date",{ascending:!1});e==="customer"&&(f=f.eq("customer_id",t));const{data:p,error:j}=await f;if(j)throw j;n(p||[])}catch(f){console.error("Error fetching refill requests:",f)}finally{o(!1)}},x=async f=>{var p;try{const j={status:"approved",approved_date:new Date().toISOString(),cost:parseFloat(d.cost),notes:d.notes},{error:_}=await ma(f.id,j);if(_)throw _;await te.from("notifications").insert({type:"refill",kiosk_id:f.kiosk_id,customer_id:f.customer_id,message:`Refill request approved for ${(p=f.kiosk)==null?void 0:p.name}. Cost: ${d.cost}`,priority:"medium"}),u(!1),a(null),h({cost:"",notes:"",approved_amount:""}),m()}catch(j){console.error("Error approving request:",j)}},v=async f=>{var p;try{const j={status:"completed",completed_date:new Date().toISOString()},{error:_}=await ma(f.id,j);if(_)throw _;await te.from("kiosks").update({liquid_level:100,needs_refill:!1,total_payments:0}).eq("id",f.kiosk_id),await te.from("notifications").insert({type:"refill",kiosk_id:f.kiosk_id,customer_id:f.customer_id,message:`Refill completed for ${(p=f.kiosk)==null?void 0:p.name}. Kiosk is ready for service.`,priority:"low"}),m()}catch(j){console.error("Error completing refill:",j)}},w=f=>{switch(f){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=f=>{switch(f){case"pending":return Wn;case"approved":return mt;case"completed":return mt;case"rejected":return It;default:return Wn}};return l?i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e==="admin"?"Refill Management":"My Refill Requests"}),i.jsx("p",{className:"text-gray-600",children:e==="admin"?"Manage liquid refill requests from customers":"Track your kiosk refill requests and status"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),i.jsx("p",{className:"text-xl font-bold text-yellow-600",children:r.filter(f=>f.status==="pending").length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Approved"}),i.jsx("p",{className:"text-xl font-bold text-blue-600",children:r.filter(f=>f.status==="approved").length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),i.jsx("p",{className:"text-xl font-bold text-green-600",children:r.filter(f=>f.status==="completed").length})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Cost"}),i.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",r.reduce((f,p)=>f+(p.cost||0),0).toLocaleString()]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsx("div",{className:"space-y-4",children:r.map(f=>{var j,_,y,N;const p=b(f.status);return i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx(Ut,{className:"w-5 h-5 text-blue-600"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(j=f.kiosk)==null?void 0:j.name}),i.jsx("p",{className:"text-sm text-gray-600",children:(_=f.kiosk)==null?void 0:_.location})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600",children:"Requested Amount"}),i.jsxs("p",{className:"font-medium",children:[f.requested_amount,"%"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600",children:"Current Level"}),i.jsxs("p",{className:"font-medium",children:[(y=f.kiosk)==null?void 0:y.liquid_level,"%"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600",children:"Request Date"}),i.jsx("p",{className:"font-medium",children:new Date(f.request_date).toLocaleDateString()})]}),f.cost&&i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600",children:"Cost"}),i.jsxs("p",{className:"font-medium text-green-600",children:["",f.cost]})]})]}),e==="admin"&&i.jsx("div",{className:"mt-2",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Customer: ",i.jsx("span",{className:"font-medium",children:(N=f.customer)==null?void 0:N.name})]})}),f.notes&&i.jsx("div",{className:"mt-2 p-2 bg-gray-50 rounded",children:i.jsx("p",{className:"text-sm text-gray-700",children:f.notes})})]}),i.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(p,{className:"w-4 h-4"}),i.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${w(f.status)}`,children:f.status.toUpperCase()})]}),e==="admin"&&i.jsxs("div",{className:"flex space-x-2",children:[f.status==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>{a(f),u(!0)},className:"px-3 py-1 bg-green-100 text-green-700 rounded text-xs hover:bg-green-200 transition-colors",children:"Approve"}),i.jsx("button",{onClick:()=>ma(f.id,{status:"rejected"}),className:"px-3 py-1 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200 transition-colors",children:"Reject"})]}),f.status==="approved"&&i.jsx("button",{onClick:()=>v(f),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors",children:"Mark Complete"})]})]})]})},f.id)})}),r.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-500",children:"No refill requests found"})]})]}),c&&s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Approve Refill Request"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Request Details"}),i.jsx("p",{className:"font-medium",children:(g=s.kiosk)==null?void 0:g.name}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Requested: ",s.requested_amount,"% refill"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Cost ()"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ci,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"number",value:d.cost,onChange:f=>h({...d,cost:f.target.value}),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter service cost",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),i.jsx("textarea",{value:d.notes,onChange:f=>h({...d,notes:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Add any notes about the refill service"})]})]}),i.jsxs("div",{className:"flex space-x-3 mt-6",children:[i.jsx("button",{onClick:()=>{u(!1),a(null),h({cost:"",notes:"",approved_amount:""})},className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:()=>x(s),disabled:!d.cost,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Approve Request"})]})]})})]})},bx=()=>new Promise(e=>{if(window.Razorpay){e(!0);return}const t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}),_x=async e=>{if(!await bx())throw new Error("Failed to load Razorpay SDK");new window.Razorpay(e).open()},Nx=(e,t)=>{const r={merchant_id:"your_razorpay_merchant_id",amount:t*100,currency:"INR",kiosk_id:e,timestamp:Date.now()};return JSON.stringify(r)},kx=(e,t)=>{const r=window.location.origin,n=new URLSearchParams({kiosk_id:e,amount:t.toString(),currency:"INR"});return`${r}/pay?${n.toString()}`},nu=({kioskId:e,kioskName:t,amount:r,customerId:n,onPaymentSuccess:s})=>{const[a,l]=T.useState(!1),[o,c]=T.useState(""),[u,d]=T.useState(""),[h,m]=T.useState(null),x=async()=>{l(!0);try{const g=await hx(r,e),f={key:"your_razorpay_key_id",amount:g.amount,currency:g.currency,name:"KioskPay",description:`Helmet cleaning service - ${t}`,order_id:g.id,handler:async p=>{try{if((await fx({razorpay_order_id:p.razorpay_order_id,razorpay_payment_id:p.razorpay_payment_id,razorpay_signature:p.razorpay_signature})).verified){const _=Math.round(r*.1),y=r-_,N={kiosk_id:e,amount:r,status:"completed",razorpay_payment_id:p.razorpay_payment_id,platform_fee:_,owner_revenue:y},{data:E}=await ax(N);await Vh(e,{total_payments:"total_payments + 1",total_revenue:`total_revenue + ${r}`,owner_revenue:`owner_revenue + ${y}`,platform_revenue:`platform_revenue + ${_}`}),await kt({type:"payment",kiosk_id:e,customer_id:n,message:`New payment received: ${r} for ${t}`,priority:"medium"}),s&&s(E),alert("Payment successful!")}else throw new Error("Payment verification failed")}catch(j){console.error("Payment verification error:",j),alert("Payment verification failed. Please contact support.")}},prefill:{name:"Customer",email:"customer@example.com",contact:"9999999999"},theme:{color:"#3B82F6"},modal:{ondismiss:()=>{l(!1)}}};await _x(f)}catch(g){console.error("Payment initiation error:",g),alert("Failed to initiate payment. Please try again."),l(!1)}},v=()=>{const g=Nx(e,r);c(g)},w=()=>{const g=kx(e,r);d(g)},b=async(g,f)=>{try{await navigator.clipboard.writeText(g),m(f),setTimeout(()=>m(null),2e3)}catch(p){console.error("Failed to copy:",p)}};return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[i.jsx(Vr,{className:"w-5 h-5 mr-2 text-blue-600"}),"Razorpay Payment Integration"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Payment Details"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-blue-700",children:["Kiosk: ",t]}),i.jsxs("p",{className:"text-blue-700",children:["Amount: ",r]})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-blue-700",children:["Platform Fee (10%): ",Math.round(r*.1)]}),i.jsxs("p",{className:"text-blue-700",children:["Owner Revenue (90%): ",r-Math.round(r*.1)]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:x,disabled:a,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:[i.jsx(Vr,{className:"w-8 h-8 text-green-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Pay Now"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Direct payment"})]}),i.jsxs("button",{onClick:v,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(oi,{className:"w-8 h-8 text-blue-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Generate QR"}),i.jsx("span",{className:"text-xs text-gray-500",children:"For kiosk display"})]}),i.jsxs("button",{onClick:w,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx(Cp,{className:"w-8 h-8 text-purple-600 mb-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Payment Link"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Shareable URL"})]})]}),o&&i.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-900",children:"QR Code Data"}),i.jsxs("button",{onClick:()=>b(o,"qr"),className:"flex items-center space-x-1 text-xs text-blue-600 hover:text-blue-800",children:[h==="qr"?i.jsx(Pc,{className:"w-3 h-3"}):i.jsx(Rc,{className:"w-3 h-3"}),i.jsx("span",{children:h==="qr"?"Copied!":"Copy"})]})]}),i.jsx("textarea",{value:o,readOnly:!0,className:"w-full h-20 text-xs font-mono bg-white border border-gray-300 rounded p-2 resize-none"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use this data to generate a QR code for your kiosk display"})]}),u&&i.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h5",{className:"text-sm font-medium text-gray-900",children:"Payment Link"}),i.jsxs("button",{onClick:()=>b(u,"link"),className:"flex items-center space-x-1 text-xs text-blue-600 hover:text-blue-800",children:[h==="link"?i.jsx(Pc,{className:"w-3 h-3"}):i.jsx(Rc,{className:"w-3 h-3"}),i.jsx("span",{children:h==="link"?"Copied!":"Copy"})]})]}),i.jsx("input",{value:u,readOnly:!0,className:"w-full text-xs font-mono bg-white border border-gray-300 rounded p-2"}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Share this link with customers for easy payment access"})]}),i.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[i.jsx("h5",{className:"text-sm font-medium text-yellow-900 mb-2",children:"Integration Setup"}),i.jsxs("ol",{className:"text-xs text-yellow-800 space-y-1 list-decimal list-inside",children:[i.jsx("li",{children:"Add your Razorpay Key ID to environment variables (VITE_RAZORPAY_KEY_ID)"}),i.jsx("li",{children:"Configure webhook endpoints for payment verification"}),i.jsx("li",{children:"Set up QR code generation service for kiosk displays"}),i.jsx("li",{children:"Test payments in sandbox mode before going live"})]})]})]})]})};function Yt(e){if(e==null||e instanceof Date)return e;if(Array.isArray(e))return e.map(t=>Yt(t));if(typeof e=="object"){const t={};for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];typeof n=="string"&&Sx(n)?t[r]=new Date(n):t[r]=Yt(n)}return t}return e}function Sx(e){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/.test(e))return!1;const r=new Date(e);return!isNaN(r.getTime())&&r.toISOString().startsWith(e.substring(0,19))}function Cx(){const[e,t]=T.useState("admin"),[r,n]=T.useState(""),[s,a]=T.useState("dashboard"),[l,o]=T.useState(!0),[c,u]=T.useState([]),[d,h]=T.useState([]),[m,x]=T.useState([]),[v,w]=T.useState([]),[b,g]=T.useState([]),f={id:e==="admin"?"admin-user-1":r,email:e==="admin"?"admin@kioskpay.com":"customer@example.com",name:e==="admin"?"Admin User":"Demo Customer"};T.useEffect(()=>{p()},[e]);const p=async()=>{try{const[S,R,Le,ie,tn]=await Promise.all([ix(),nx(),e==="admin"?dx():Promise.resolve({data:[]}),Qh(),ux(e==="customer"?r:void 0)]);u(Yt(S.data||[])),x(Yt(R.data||[])),h(Yt(Le.data||[])),w(Yt(ie.data||[])),g(Yt(tn.data||[]))}catch(S){console.error("Error fetching data:",S)}finally{o(!1)}},j=async()=>{t("admin"),n(""),a("dashboard"),console.log("Switched to admin view")},_=S=>{a("refund-tickets")},y=S=>{p()},N=async S=>{try{await Vh(S.id,S),S.liquid_level===100&&!S.needs_refill&&await kt({type:"maintenance",kiosk_id:S.id,customer_id:S.customer_id,message:`${S.name} has been refilled and is ready for service`,priority:"low"}),p()}catch(R){console.error("Error updating kiosk:",R)}},E=async S=>{try{const{data:R}=await sx(S);R&&await kt({type:"maintenance",kiosk_id:R.id,customer_id:R.customer_id,message:`New kiosk "${R.name}" has been added to the network`,priority:"low"}),p(),a("kiosks")}catch(R){console.error("Error adding kiosk:",R)}},M=async S=>{try{const R=btoa(S.email+":password123"),Le={...S,password_hash:R},{data:ie}=await rx(Le);ie&&await kt({type:"customer",customer_id:ie.id,message:`New customer "${ie.name}" has been registered`,priority:"low"}),p(),a("customers")}catch(R){console.error("Error adding customer:",R)}},L=async S=>{try{p()}catch(R){console.error("Error updating customer:",R)}},ce=async S=>{try{p()}catch(R){console.error("Error deleting customer:",R)}},gt=async S=>{try{await cx(S.id,S),S.status==="completed"&&await kt({type:"maintenance",kiosk_id:S.kiosk_id,customer_id:S.customer_id,message:`Maintenance completed for ${S.type} request`,priority:"low"}),p()}catch(R){console.error("Error updating maintenance request:",R)}},Kt=async S=>{try{await ox(S);const R=c.find(ie=>ie.id===S.kiosk_id),Le=m.find(ie=>ie.id===S.customer_id);await kt({type:"maintenance",kiosk_id:S.kiosk_id,customer_id:S.customer_id,message:`New ${S.type} request from ${Le==null?void 0:Le.name} for ${R==null?void 0:R.name}`,priority:S.priority}),p()}catch(R){console.error("Error creating maintenance request:",R)}},en=async S=>{try{await Xc(S),p()}catch(R){console.error("Error marking notification as read:",R)}},rs=async()=>{try{const S=d.filter(R=>!R.read);await Promise.all(S.map(R=>Xc(R.id))),p()}catch(S){console.error("Error marking all notifications as read:",S)}},mr=e==="admin"?d.filter(S=>!S.read).length:d.filter(S=>!S.read&&S.customer_id===r).length,Fe=m.find(S=>S.id===r),C=c.filter(S=>S.customer_id===r),A=d.filter(S=>S.customer_id===r),$=()=>{if(e==="customer"){if(!Fe)return i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"Customer not found"})});switch(s){case"dashboard":return i.jsx(tu,{customer:Fe,kiosks:C,notifications:A});case"my-kiosks":return i.jsx(vx,{kiosks:C,onMaintenanceRequest:Kt});case"my-payments":return i.jsx($c,{kiosks:C,onRefund:_});case"my-revenue":return i.jsx(wx,{kiosks:C});case"maintenance-requests":const S=b.filter(R=>R.customer_id===r);return i.jsx(eu,{maintenanceRequests:S,kiosks:C,customers:[Fe],onUpdateRequest:gt});case"refill-requests":return i.jsx(ru,{userRole:"customer",currentUserId:r});case"refund-tickets":return i.jsx(Zc,{userRole:"customer",currentUserId:r});case"notifications":return i.jsx(jx,{notifications:A,kiosks:C,onMarkAsRead:en,onMarkAllAsRead:rs});case"razorpay-integration":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Integration"}),i.jsx("p",{className:"text-gray-600",children:"Test Razorpay integration for your kiosks"})]}),C.map(R=>i.jsx(nu,{kioskId:R.id,kioskName:R.name,amount:R.price_per_cleaning,customerId:r,onPaymentSuccess:()=>p()},R.id))]});case"settings":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Account Settings"}),i.jsx("p",{className:"text-gray-600",children:"Manage your account preferences and settings"})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Name"}),i.jsx("p",{className:"text-sm text-gray-900",children:Fe.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),i.jsx("p",{className:"text-sm text-gray-900",children:Fe.email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Phone"}),i.jsx("p",{className:"text-sm text-gray-900",children:Fe.phone})]}),i.jsx("div",{className:"pt-4",children:i.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Switch to Admin View"})})]})})]});default:return i.jsx(tu,{customer:Fe,kiosks:C,notifications:A})}}switch(s){case"dashboard":return i.jsx(Oc,{kiosks:c,notifications:d});case"payments":return i.jsx($c,{kiosks:c,onRefund:_});case"kiosks":return i.jsx(Ip,{kiosks:c,onKioskUpdate:N});case"customers":return i.jsx(gx,{customers:m,kiosks:c,onCustomerUpdate:L,onCustomerDelete:ce});case"maintenance":return i.jsx(eu,{maintenanceRequests:b,kiosks:c,customers:m,onUpdateRequest:gt});case"revenue":return i.jsx(yx,{kiosks:c,customers:m});case"refunds":return i.jsx(Dp,{kiosks:c,onProcessRefund:y});case"refund-tickets":return i.jsx(Zc,{userRole:"admin",currentUserId:f.id});case"refill-management":return i.jsx(ru,{userRole:"admin",currentUserId:f.id});case"notifications":return i.jsx(mx,{notifications:d,kiosks:c,onMarkAsRead:en,onMarkAllAsRead:rs});case"add-kiosk":return i.jsx(px,{onAddKiosk:E,customers:m});case"add-customer":return i.jsx(xx,{onAddCustomer:M});case"razorpay-integration":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Razorpay Integration"}),i.jsx("p",{className:"text-gray-600",children:"Manage payment integration for all kiosks"})]}),c.map(S=>i.jsx(nu,{kioskId:S.id,kioskName:S.name,amount:S.price_per_cleaning,customerId:S.customer_id,onPaymentSuccess:()=>p()},S.id))]});case"settings":return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Settings"}),i.jsx("p",{className:"text-gray-600",children:"Configure your KioskPay dashboard preferences"})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Role Switching"}),i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Switch to customer view to see how customers experience the platform"}),i.jsxs("div",{className:"space-y-2",children:[m.map(S=>i.jsxs("button",{onClick:()=>{n(S.id),t("customer"),a("dashboard")},className:"block w-full text-left px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:["Switch to ",S.name,"'s view"]},S.id)),m.length===0&&i.jsx("p",{className:"text-sm text-gray-500 italic",children:"No customers available. Add customers first."})]})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsx("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Dashboard"})})]})})]});default:return i.jsx(Oc,{kiosks:c,notifications:d})}};return l?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading KioskPay Dashboard..."})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx(Op,{activeTab:s,onTabChange:a,notificationCount:mr,userRole:e}),i.jsxs("div",{className:"ml-64",children:[i.jsx($p,{notificationCount:mr,user:f,userRole:e,onLogout:j}),i.jsx("main",{className:"p-6",children:$()})]})]})}gh(document.getElementById("root")).render(i.jsx(T.StrictMode,{children:i.jsx(Cx,{})}));
